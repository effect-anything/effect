(()=>{var e={4477:(e,t,r)=>{var i=r(7816);var s=r(8835).parse;var n=r(8080);var o=r(7211);var a=r(8605);var c=r(1669);var u=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername","checkServerIdentity"];var h=[239,187,191];var l=58;var f=32;var p=10;var d=13;function hasBom(e){return h.every((function(t,r){return e[r]===t}))}function EventSource(e,t){var r=EventSource.CONNECTING;Object.defineProperty(this,"readyState",{get:function(){return r}});Object.defineProperty(this,"url",{get:function(){return e}});var n=this;n.reconnectInterval=1e3;n.connectionInProgress=false;function onConnectionClosed(t){if(r===EventSource.CLOSED)return;r=EventSource.CONNECTING;_emit("error",new Event("error",{message:t}));if(y){e=y;y=null}setTimeout((function(){if(r!==EventSource.CONNECTING||n.connectionInProgress){return}n.connectionInProgress=true;connect()}),n.reconnectInterval)}var c;var v="";if(t&&t.headers&&t.headers["Last-Event-ID"]){v=t.headers["Last-Event-ID"];delete t.headers["Last-Event-ID"]}var _=false;var m="";var g="";var y=null;function connect(){var i=s(e);var f=i.protocol==="https:";i.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"};if(v)i.headers["Last-Event-ID"]=v;if(t&&t.headers){for(var m in t.headers){var g=t.headers[m];if(g){i.headers[m]=g}}}i.rejectUnauthorized=!(t&&!t.rejectUnauthorized);if(t&&t.createConnection!==undefined){i.createConnection=t.createConnection}var b=t&&t.proxy;if(b){var E=s(t.proxy);f=E.protocol==="https:";i.protocol=f?"https:":"http:";i.path=e;i.headers.Host=i.host;i.hostname=E.hostname;i.host=E.host;i.port=E.port}if(t&&t.https){for(var S in t.https){if(u.indexOf(S)===-1){continue}var w=t.https[S];if(w!==undefined){i[S]=w}}}if(t&&t.withCredentials!==undefined){i.withCredentials=t.withCredentials}c=(f?o:a).request(i,(function(t){n.connectionInProgress=false;if(t.statusCode===500||t.statusCode===502||t.statusCode===503||t.statusCode===504){_emit("error",new Event("error",{status:t.statusCode,message:t.statusMessage}));onConnectionClosed();return}if(t.statusCode===301||t.statusCode===302||t.statusCode===307){if(!t.headers.location){_emit("error",new Event("error",{status:t.statusCode,message:t.statusMessage}));return}if(t.statusCode===307)y=e;e=t.headers.location;process.nextTick(connect);return}if(t.statusCode!==200){_emit("error",new Event("error",{status:t.statusCode,message:t.statusMessage}));return n.close()}r=EventSource.OPEN;t.on("close",(function(){t.removeAllListeners("close");t.removeAllListeners("end");onConnectionClosed()}));t.on("end",(function(){t.removeAllListeners("close");t.removeAllListeners("end");onConnectionClosed()}));_emit("open",new Event("open"));var i=true;var s;var o=0;var a=-1;t.on("data",(function(e){s=s?Buffer.concat([s,e]):e;if(i&&hasBom(s)){s=s.slice(h.length)}i=false;var t=0;var r=s.length;while(t<r){if(_){if(s[t]===p){++t}_=false}var n=-1;var c=a;var u;for(var f=o;n<0&&f<r;++f){u=s[f];if(u===l){if(c<0){c=f-t}}else if(u===d){_=true;n=f-t}else if(u===p){n=f-t}}if(n<0){o=r-t;a=c;break}else{o=0;a=-1}parseEventStreamLine(s,t,c,n);t+=n+1}if(t===r){s=void 0}else if(t>0){s=s.slice(t)}}))}));c.on("error",(function(e){n.connectionInProgress=false;onConnectionClosed(e.message)}));if(c.setNoDelay)c.setNoDelay(true);c.end()}connect();function _emit(){if(n.listeners(arguments[0]).length>0){n.emit.apply(n,arguments)}}this._close=function(){if(r===EventSource.CLOSED)return;r=EventSource.CLOSED;if(c.abort)c.abort();if(c.xhr&&c.xhr.abort)c.xhr.abort()};function parseEventStreamLine(t,r,s,o){if(o===0){if(m.length>0){var a=g||"message";_emit(a,new MessageEvent(a,{data:m.slice(0,-1),lastEventId:v,origin:i(e)}));m=""}g=void 0}else if(s>0){var c=s<0;var u=0;var h=t.slice(r,r+(c?o:s)).toString();if(c){u=o}else if(t[r+s+1]!==f){u=s+1}else{u=s+2}r+=u;var l=o-u;var p=t.slice(r,r+l).toString();if(h==="data"){m+=p+"\n"}else if(h==="event"){g=p}else if(h==="id"){v=p}else if(h==="retry"){var d=parseInt(p,10);if(!Number.isNaN(d)){n.reconnectInterval=d}}}}}e.exports=EventSource;c.inherits(EventSource,n.EventEmitter);EventSource.prototype.constructor=EventSource;["open","error","message"].forEach((function(e){Object.defineProperty(EventSource.prototype,"on"+e,{get:function get(){var t=this.listeners(e)[0];return t?t._listener?t._listener:t:undefined},set:function set(t){this.removeAllListeners(e);this.addEventListener(e,t)}})}));Object.defineProperty(EventSource,"CONNECTING",{enumerable:true,value:0});Object.defineProperty(EventSource,"OPEN",{enumerable:true,value:1});Object.defineProperty(EventSource,"CLOSED",{enumerable:true,value:2});EventSource.prototype.CONNECTING=0;EventSource.prototype.OPEN=1;EventSource.prototype.CLOSED=2;EventSource.prototype.close=function(){this._close()};EventSource.prototype.addEventListener=function addEventListener(e,t){if(typeof t==="function"){t._listener=t;this.on(e,t)}};EventSource.prototype.dispatchEvent=function dispatchEvent(e){if(!e.type){throw new Error("UNSPECIFIED_EVENT_TYPE_ERR")}this.emit(e.type,e.detail)};EventSource.prototype.removeEventListener=function removeEventListener(e,t){if(typeof t==="function"){t._listener=undefined;this.removeListener(e,t)}};function Event(e,t){Object.defineProperty(this,"type",{writable:false,value:e,enumerable:true});if(t){for(var r in t){if(t.hasOwnProperty(r)){Object.defineProperty(this,r,{writable:false,value:t[r],enumerable:true})}}}}function MessageEvent(e,t){Object.defineProperty(this,"type",{writable:false,value:e,enumerable:true});for(var r in t){if(t.hasOwnProperty(r)){Object.defineProperty(this,r,{writable:false,value:t[r],enumerable:true})}}}},1411:(e,t,r)=>{"use strict";var i=r(2413).Stream,s=r(1669),n=r(3436),o=r(8642),a=r(8414),c=r(7213),u=r(4633);var EventSource=function(e,t,r){this.writable=true;r=r||{};this._stream=t.socket;this._ping=r.ping||this.DEFAULT_PING;this._retry=r.retry||this.DEFAULT_RETRY;var i=n.isSecureRequest(e)?"https:":"http:";this.url=i+"//"+e.headers.host+e.url;this.lastEventId=e.headers["last-event-id"]||"";this.readyState=a.CONNECTING;var s=new o,c=this;if(r.headers){for(var u in r.headers)s.set(u,r.headers[u])}if(!this._stream||!this._stream.writable)return;process.nextTick((function(){c._open()}));this._stream.setTimeout(0);this._stream.setNoDelay(true);var h="HTTP/1.1 200 OK\r\n"+"Content-Type: text/event-stream\r\n"+"Cache-Control: no-cache, no-store\r\n"+"Connection: close\r\n"+s.toString()+"\r\n"+"retry: "+Math.floor(this._retry*1e3)+"\r\n\r\n";this._write(h);this._stream.on("drain",(function(){c.emit("drain")}));if(this._ping)this._pingTimer=setInterval((function(){c.ping()}),this._ping*1e3);["error","end"].forEach((function(e){c._stream.on(e,(function(){c.close()}))}))};s.inherits(EventSource,i);EventSource.isEventSource=function(e){if(e.method!=="GET")return false;var t=(e.headers.accept||"").split(/\s*,\s*/);return t.indexOf("text/event-stream")>=0};var h={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(e){if(!this.writable)return false;try{return this._stream.write(e,"utf8")}catch(e){return false}},_open:function(){if(this.readyState!==a.CONNECTING)return;this.readyState=a.OPEN;var e=new u("open");e.initEvent("open",false,false);this.dispatchEvent(e)},write:function(e){return this.send(e)},end:function(e){if(e!==undefined)this.write(e);this.close()},send:function(e,t){if(this.readyState>a.OPEN)return false;e=String(e).replace(/(\r\n|\r|\n)/g,"$1data: ");t=t||{};var r="";if(t.event)r+="event: "+t.event+"\r\n";if(t.id)r+="id: "+t.id+"\r\n";r+="data: "+e+"\r\n\r\n";return this._write(r)},ping:function(){return this._write(":\r\n\r\n")},close:function(){if(this.readyState>a.OPEN)return false;this.readyState=a.CLOSED;this.writable=false;if(this._pingTimer)clearInterval(this._pingTimer);if(this._stream)this._stream.end();var e=new u("close");e.initEvent("close",false,false);this.dispatchEvent(e);return true}};for(var l in h)EventSource.prototype[l]=h[l];for(var f in c)EventSource.prototype[f]=c[f];e.exports=EventSource},2178:(e,t,r)=>{"use strict";var i=r(1669),s=r(3436),n=r(8414);var WebSocket=function(e,t,r,i,o){o=o||{};this._stream=t;this._driver=s.http(e,{maxLength:o.maxLength,protocols:i});var a=this;if(!this._stream||!this._stream.writable)return;if(!this._stream.readable)return this._stream.end();var catchup=function(){a._stream.removeListener("data",catchup)};this._stream.on("data",catchup);n.call(this,o);process.nextTick((function(){a._driver.start();a._driver.io.write(r)}))};i.inherits(WebSocket,n);WebSocket.isWebSocket=function(e){return s.isWebSocket(e)};WebSocket.validateOptions=function(e,t){s.validateOptions(e,t)};WebSocket.WebSocket=WebSocket;WebSocket.Client=r(5429);WebSocket.EventSource=r(1411);e.exports=WebSocket},8414:(e,t,r)=>{"use strict";var i=r(2413).Stream,s=r(1669),n=r(3436),o=r(7213),a=r(4633);var API=function(e){e=e||{};n.validateOptions(e,["headers","extensions","maxLength","ping","proxy","tls","ca"]);this.readable=this.writable=true;var t=e.headers;if(t){for(var r in t)this._driver.setHeader(r,t[r])}var i=e.extensions;if(i){[].concat(i).forEach(this._driver.addExtension,this._driver)}this._ping=e.ping;this._pingId=0;this.readyState=API.CONNECTING;this.bufferedAmount=0;this.protocol="";this.url=this._driver.url;this.version=this._driver.version;var s=this;this._driver.on("open",(function(e){s._open()}));this._driver.on("message",(function(e){s._receiveMessage(e.data)}));this._driver.on("close",(function(e){s._beginClose(e.reason,e.code)}));this._driver.on("error",(function(e){s._emitError(e.message)}));this.on("error",(function(){}));this._driver.messages.on("drain",(function(){s.emit("drain")}));if(this._ping)this._pingTimer=setInterval((function(){s._pingId+=1;s.ping(s._pingId.toString())}),this._ping*1e3);this._configureStream();if(!this._proxy){this._stream.pipe(this._driver.io);this._driver.io.pipe(this._stream)}};s.inherits(API,i);API.CONNECTING=0;API.OPEN=1;API.CLOSING=2;API.CLOSED=3;API.CLOSE_TIMEOUT=3e4;var c={write:function(e){return this.send(e)},end:function(e){if(e!==undefined)this.send(e);this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(e){if(this.readyState>API.OPEN)return false;if(!(e instanceof Buffer))e=String(e);return this._driver.messages.write(e)},ping:function(e,t){if(this.readyState>API.OPEN)return false;return this._driver.ping(e,t)},close:function(e,t){if(e===undefined)e=1e3;if(t===undefined)t="";if(e!==1e3&&(e<3e3||e>4999))throw new Error("Failed to execute 'close' on WebSocket: "+"The code must be either 1000, or between 3000 and 4999. "+e+" is neither.");if(this.readyState<API.CLOSING){var r=this;this._closeTimer=setTimeout((function(){r._beginClose("",1006)}),API.CLOSE_TIMEOUT)}if(this.readyState!==API.CLOSED)this.readyState=API.CLOSING;this._driver.close(t,e)},_configureStream:function(){var e=this;this._stream.setTimeout(0);this._stream.setNoDelay(true);["close","end"].forEach((function(t){this._stream.on(t,(function(){e._finalizeClose()}))}),this);this._stream.on("error",(function(t){e._emitError("Network error: "+e.url+": "+t.message);e._finalizeClose()}))},_open:function(){if(this.readyState!==API.CONNECTING)return;this.readyState=API.OPEN;this.protocol=this._driver.protocol||"";var e=new a("open");e.initEvent("open",false,false);this.dispatchEvent(e)},_receiveMessage:function(e){if(this.readyState>API.OPEN)return false;if(this.readable)this.emit("data",e);var t=new a("message",{data:e});t.initEvent("message",false,false);this.dispatchEvent(t)},_emitError:function(e){if(this.readyState>=API.CLOSING)return;var t=new a("error",{message:e});t.initEvent("error",false,false);this.dispatchEvent(t)},_beginClose:function(e,t){if(this.readyState===API.CLOSED)return;this.readyState=API.CLOSING;this._closeParams=[e,t];if(this._stream){this._stream.destroy();if(!this._stream.readable)this._finalizeClose()}},_finalizeClose:function(){if(this.readyState===API.CLOSED)return;this.readyState=API.CLOSED;if(this._closeTimer)clearTimeout(this._closeTimer);if(this._pingTimer)clearInterval(this._pingTimer);if(this._stream)this._stream.end();if(this.readable)this.emit("end");this.readable=this.writable=false;var e=this._closeParams?this._closeParams[0]:"",t=this._closeParams?this._closeParams[1]:1006;var r=new a("close",{code:t,reason:e});r.initEvent("close",false,false);this.dispatchEvent(r)}};for(var u in c)API.prototype[u]=c[u];for(var h in o)API.prototype[h]=o[h];e.exports=API},4633:e=>{"use strict";var Event=function(e,t){this.type=e;for(var r in t)this[r]=t[r]};Event.prototype.initEvent=function(e,t,r){this.type=e;this.bubbles=t;this.cancelable=r};Event.prototype.stopPropagation=function(){};Event.prototype.preventDefault=function(){};Event.CAPTURING_PHASE=1;Event.AT_TARGET=2;Event.BUBBLING_PHASE=3;e.exports=Event},7213:(e,t,r)=>{"use strict";var i=r(4633);var s={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(e,t,r){this.on(e,t)},removeEventListener:function(e,t,r){this.removeListener(e,t)},dispatchEvent:function(e){e.target=e.currentTarget=this;e.eventPhase=i.AT_TARGET;if(this["on"+e.type])this["on"+e.type](e);this.emit(e.type,e)}};e.exports=s},5429:(e,t,r)=>{"use strict";var i=r(1669),s=r(1631),n=r(4016),o=r(8835),a=r(3436),c=r(8414),u=r(4633);var h={"http:":80,"https:":443,"ws:":80,"wss:":443},l=["https:","wss:"];var Client=function(e,t,r){r=r||{};this.url=e;this._driver=a.client(this.url,{maxLength:r.maxLength,protocols:t});["open","error"].forEach((function(e){this._driver.on(e,(function(){m.headers=m._driver.headers;m.statusCode=m._driver.statusCode}))}),this);var i=r.proxy||{},u=o.parse(i.origin||this.url),f=u.port||h[u.protocol],p=l.indexOf(u.protocol)>=0,onConnect=function(){m._onConnect()},d=r.net||{},v=r.tls||{},_=i.origin?i.tls||{}:v,m=this;d.host=_.host=u.hostname;d.port=_.port=f;v.ca=v.ca||r.ca;_.servername=_.servername||u.hostname;this._stream=p?n.connect(_,onConnect):s.connect(d,onConnect);if(i.origin)this._configureProxy(i,v);c.call(this,r)};i.inherits(Client,c);Client.prototype._onConnect=function(){var e=this._proxy||this._driver;e.start()};Client.prototype._configureProxy=function(e,t){var r=o.parse(this.url),i=l.indexOf(r.protocol)>=0,s=this,a;this._proxy=this._driver.proxy(e.origin);if(e.headers){for(a in e.headers)this._proxy.setHeader(a,e.headers[a])}this._proxy.pipe(this._stream,{end:false});this._stream.pipe(this._proxy);this._proxy.on("connect",(function(){if(i){var e={socket:s._stream,servername:r.hostname};for(a in t)e[a]=t[a];s._stream=n.connect(e);s._configureStream()}s._driver.io.pipe(s._stream);s._stream.pipe(s._driver.io);s._driver.start()}));this._proxy.on("error",(function(e){s._driver.emit("error",e)}))};e.exports=Client},508:(e,t,r)=>{var i;var s=r(2357);t.m=HTTPParser;function HTTPParser(e){s.ok(e===HTTPParser.REQUEST||e===HTTPParser.RESPONSE||e===undefined);if(e===undefined){}else{this.initialize(e)}}HTTPParser.prototype.initialize=function(e,t){s.ok(e===HTTPParser.REQUEST||e===HTTPParser.RESPONSE);this.type=e;this.state=e+"_LINE";this.info={headers:[],upgrade:false};this.trailers=[];this.line="";this.isChunked=false;this.connection="";this.headerSize=0;this.body_bytes=null;this.isUserCall=false;this.hadError=false};HTTPParser.encoding="ascii";HTTPParser.maxHeaderSize=80*1024;HTTPParser.REQUEST="REQUEST";HTTPParser.RESPONSE="RESPONSE";var n=HTTPParser.kOnHeaders=1;var o=HTTPParser.kOnHeadersComplete=2;var a=HTTPParser.kOnBody=3;var c=HTTPParser.kOnMessageComplete=4;HTTPParser.prototype[n]=HTTPParser.prototype[o]=HTTPParser.prototype[a]=HTTPParser.prototype[c]=function(){};var u=true;Object.defineProperty(HTTPParser,"kOnExecute",{get:function(){u=false;return 99}});var h=i=HTTPParser.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK"];var l=h.indexOf("CONNECT");HTTPParser.prototype.reinitialize=HTTPParser;HTTPParser.prototype.close=HTTPParser.prototype.pause=HTTPParser.prototype.resume=HTTPParser.prototype.free=function(){};HTTPParser.prototype._compatMode0_11=false;HTTPParser.prototype.getAsyncId=function(){return 0};var f={REQUEST_LINE:true,RESPONSE_LINE:true,HEADER:true};HTTPParser.prototype.execute=function(e,t,r){if(!(this instanceof HTTPParser)){throw new TypeError("not a HTTPParser")}t=t||0;r=typeof r==="number"?r:e.length;this.chunk=e;this.offset=t;var i=this.end=t+r;try{while(this.offset<i){if(this[this.state]()){break}}}catch(e){if(this.isUserCall){throw e}this.hadError=true;return e}this.chunk=null;r=this.offset-t;if(f[this.state]){this.headerSize+=r;if(this.headerSize>HTTPParser.maxHeaderSize){return new Error("max header size exceeded")}}return r};var p={REQUEST_LINE:true,RESPONSE_LINE:true,BODY_RAW:true};HTTPParser.prototype.finish=function(){if(this.hadError){return}if(!p[this.state]){return new Error("invalid state for EOF")}if(this.state==="BODY_RAW"){this.userCall()(this[c]())}};HTTPParser.prototype.consume=HTTPParser.prototype.unconsume=HTTPParser.prototype.getCurrentBuffer=function(){};HTTPParser.prototype.userCall=function(){this.isUserCall=true;var e=this;return function(t){e.isUserCall=false;return t}};HTTPParser.prototype.nextRequest=function(){this.userCall()(this[c]());this.reinitialize(this.type)};HTTPParser.prototype.consumeLine=function(){var e=this.end,t=this.chunk;for(var r=this.offset;r<e;r++){if(t[r]===10){var i=this.line+t.toString(HTTPParser.encoding,this.offset,r);if(i.charAt(i.length-1)==="\r"){i=i.substr(0,i.length-1)}this.line="";this.offset=r+1;return i}}this.line+=t.toString(HTTPParser.encoding,this.offset,this.end);this.offset=this.end};var d=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/;var v=/^[ \t]+(.*[^ \t])/;HTTPParser.prototype.parseHeader=function(e,t){if(e.indexOf("\r")!==-1){throw parseErrorCode("HPE_LF_EXPECTED")}var r=d.exec(e);var i=r&&r[1];if(i){t.push(i);t.push(r[2])}else{var s=v.exec(e);if(s&&t.length){if(t[t.length-1]){t[t.length-1]+=" "}t[t.length-1]+=s[1]}}};var _=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;HTTPParser.prototype.REQUEST_LINE=function(){var e=this.consumeLine();if(!e){return}var t=_.exec(e);if(t===null){throw parseErrorCode("HPE_INVALID_CONSTANT")}this.info.method=this._compatMode0_11?t[1]:h.indexOf(t[1]);if(this.info.method===-1){throw new Error("invalid request method")}this.info.url=t[2];this.info.versionMajor=+t[3];this.info.versionMinor=+t[4];this.body_bytes=0;this.state="HEADER"};var m=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;HTTPParser.prototype.RESPONSE_LINE=function(){var e=this.consumeLine();if(!e){return}var t=m.exec(e);if(t===null){throw parseErrorCode("HPE_INVALID_CONSTANT")}this.info.versionMajor=+t[1];this.info.versionMinor=+t[2];var r=this.info.statusCode=+t[3];this.info.statusMessage=t[4];if((r/100|0)===1||r===204||r===304){this.body_bytes=0}this.state="HEADER"};HTTPParser.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf("close")!==-1){return false}}else if(this.connection.indexOf("keep-alive")===-1){return false}if(this.body_bytes!==null||this.isChunked){return true}return false};HTTPParser.prototype.HEADER=function(){var e=this.consumeLine();if(e===undefined){return}var t=this.info;if(e){this.parseHeader(e,t.headers)}else{var r=t.headers;var i=false;var s;var n=false;for(var a=0;a<r.length;a+=2){switch(r[a].toLowerCase()){case"transfer-encoding":this.isChunked=r[a+1].toLowerCase()==="chunked";break;case"content-length":s=+r[a+1];if(i){if(s!==this.body_bytes){throw parseErrorCode("HPE_UNEXPECTED_CONTENT_LENGTH")}}else{i=true;this.body_bytes=s}break;case"connection":this.connection+=r[a+1].toLowerCase();break;case"upgrade":n=true;break}}if(this.isChunked&&i){i=false;this.body_bytes=null}if(n&&this.connection.indexOf("upgrade")!=-1){t.upgrade=this.type===HTTPParser.REQUEST||t.statusCode===101}else{t.upgrade=t.method===l}if(this.isChunked&&t.upgrade){this.isChunked=false}t.shouldKeepAlive=this.shouldKeepAlive();var c;if(u){c=this.userCall()(this[o](t))}else{c=this.userCall()(this[o](t.versionMajor,t.versionMinor,t.headers,t.method,t.url,t.statusCode,t.statusMessage,t.upgrade,t.shouldKeepAlive))}if(c===2){this.nextRequest();return true}else if(this.isChunked&&!c){this.state="BODY_CHUNKHEAD"}else if(c||this.body_bytes===0){this.nextRequest();return t.upgrade}else if(this.body_bytes===null){this.state="BODY_RAW"}else{this.state="BODY_SIZED"}}};HTTPParser.prototype.BODY_CHUNKHEAD=function(){var e=this.consumeLine();if(e===undefined){return}this.body_bytes=parseInt(e,16);if(!this.body_bytes){this.state="BODY_CHUNKTRAILERS"}else{this.state="BODY_CHUNK"}};HTTPParser.prototype.BODY_CHUNK=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e));this.offset+=e;this.body_bytes-=e;if(!this.body_bytes){this.state="BODY_CHUNKEMPTYLINE"}};HTTPParser.prototype.BODY_CHUNKEMPTYLINE=function(){var e=this.consumeLine();if(e===undefined){return}s.equal(e,"");this.state="BODY_CHUNKHEAD"};HTTPParser.prototype.BODY_CHUNKTRAILERS=function(){var e=this.consumeLine();if(e===undefined){return}if(e){this.parseHeader(e,this.trailers)}else{if(this.trailers.length){this.userCall()(this[n](this.trailers,""))}this.nextRequest()}};HTTPParser.prototype.BODY_RAW=function(){var e=this.end-this.offset;this.userCall()(this[a](this.chunk,this.offset,e));this.offset=this.end};HTTPParser.prototype.BODY_SIZED=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e));this.offset+=e;this.body_bytes-=e;if(!this.body_bytes){this.nextRequest()}};["Headers","HeadersComplete","Body","MessageComplete"].forEach((function(e){var t=HTTPParser["kOn"+e];Object.defineProperty(HTTPParser.prototype,"on"+e,{get:function(){return this[t]},set:function(e){this._compatMode0_11=true;l="CONNECT";return this[t]=e}})}));function parseErrorCode(e){var t=new Error("Parse Error");t.code=e;return t}},6919:(e,t,r)=>{try{var i=r(1669);if(typeof i.inherits!=="function")throw"";e.exports=i.inherits}catch(t){e.exports=r(7526)}},7526:e=>{if(typeof Object.create==="function"){e.exports=function inherits(e,t){if(t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function inherits(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype;e.prototype=new TempCtor;e.prototype.constructor=e}}}},6462:function(e,t,r){e=r.nmd(e);
/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */(function(){var r=typeof define==="function"&&define.amd;var i={function:true,object:true};var s=i[typeof t]&&t&&!t.nodeType&&t;var n=i[typeof window]&&window||this,o=s&&i["object"]&&e&&!e.nodeType&&typeof global=="object"&&global;if(o&&(o.global===o||o.window===o||o.self===o)){n=o}function runInContext(e,t){e||(e=n.Object());t||(t=n.Object());var r=e.Number||n.Number,s=e.String||n.String,o=e.Object||n.Object,a=e.Date||n.Date,c=e.SyntaxError||n.SyntaxError,u=e.TypeError||n.TypeError,h=e.Math||n.Math,l=e.JSON||n.JSON;if(typeof l=="object"&&l){t.stringify=l.stringify;t.parse=l.parse}var f=o.prototype,p=f.toString,d=f.hasOwnProperty,v;function attempt(e,t){try{e()}catch(e){if(t){t()}}}var _=new a(-0xc782b5b800cec);attempt((function(){_=_.getUTCFullYear()==-109252&&_.getUTCMonth()===0&&_.getUTCDate()===1&&_.getUTCHours()==10&&_.getUTCMinutes()==37&&_.getUTCSeconds()==6&&_.getUTCMilliseconds()==708}));function has(e){if(has[e]!=null){return has[e]}var i;if(e=="bug-string-char-index"){i="a"[0]!="a"}else if(e=="json"){i=has("json-stringify")&&has("date-serialization")&&has("json-parse")}else if(e=="date-serialization"){i=has("json-stringify")&&_;if(i){var n=t.stringify;attempt((function(){i=n(new a(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&n(new a(864e13))=='"+275760-09-13T00:00:00.000Z"'&&n(new a(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&n(new a(-1))=='"1969-12-31T23:59:59.999Z"'}))}}else{var o,c='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(e=="json-stringify"){var n=t.stringify,u=typeof n=="function";if(u){(o=function(){return 1}).toJSON=o;attempt((function(){u=n(0)==="0"&&n(new r)==="0"&&n(new s)=='""'&&n(p)===v&&n(v)===v&&n()===v&&n(o)==="1"&&n([o])=="[1]"&&n([v])=="[null]"&&n(null)=="null"&&n([v,p,null])=="[null,null,null]"&&n({a:[o,true,false,null,"\0\b\n\f\r\t"]})==c&&n(null,o)==="1"&&n([1,2],null,1)=="[\n 1,\n 2\n]"}),(function(){u=false}))}i=u}if(e=="json-parse"){var h=t.parse,l;if(typeof h=="function"){attempt((function(){if(h("0")===0&&!h(false)){o=h(c);l=o["a"].length==5&&o["a"][0]===1;if(l){attempt((function(){l=!h('"\t"')}));if(l){attempt((function(){l=h("01")!==1}))}if(l){attempt((function(){l=h("1.")!==1}))}}}}),(function(){l=false}))}i=l}}return has[e]=!!i}has["bug-string-char-index"]=has["date-serialization"]=has["json"]=has["json-stringify"]=has["json-parse"]=null;if(!has("json")){var m="[object Function]",g="[object Date]",y="[object Number]",b="[object String]",E="[object Array]",S="[object Boolean]";var w=has("bug-string-char-index");var forOwn=function(e,t){var r=0,s,n,o;(s=function(){this.valueOf=0}).prototype.valueOf=0;n=new s;for(o in n){if(d.call(n,o)){r++}}s=n=null;if(!r){n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forOwn=function(e,t){var r=p.call(e)==m,s,o;var a=!r&&typeof e.constructor!="function"&&i[typeof e.hasOwnProperty]&&e.hasOwnProperty||d;for(s in e){if(!(r&&s=="prototype")&&a.call(e,s)){t(s)}}for(o=n.length;s=n[--o];){if(a.call(e,s)){t(s)}}}}else{forOwn=function(e,t){var r=p.call(e)==m,i,s;for(i in e){if(!(r&&i=="prototype")&&d.call(e,i)&&!(s=i==="constructor")){t(i)}}if(s||d.call(e,i="constructor")){t(i)}}}return forOwn(e,t)};if(!has("json-stringify")&&!has("date-serialization")){var T={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var O="000000";var toPaddedString=function(e,t){return(O+(t||0)).slice(-e)};var serializeDate=function(e){var t,r,i,s,n,o,a,c,u;if(!_){var l=h.floor;var f=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(e,t){return f[t]+365*(e-1970)+l((e-1969+(t=+(t>1)))/4)-l((e-1901+t)/100)+l((e-1601+t)/400)};t=function(e){s=l(e/864e5);for(r=l(s/365.2425)+1970-1;getDay(r+1,0)<=s;r++);for(i=l((s-getDay(r,0))/30.42);getDay(r,i+1)<=s;i++);s=1+s-getDay(r,i);n=(e%864e5+864e5)%864e5;o=l(n/36e5)%24;a=l(n/6e4)%60;c=l(n/1e3)%60;u=n%1e3}}else{t=function(e){r=e.getUTCFullYear();i=e.getUTCMonth();s=e.getUTCDate();o=e.getUTCHours();a=e.getUTCMinutes();c=e.getUTCSeconds();u=e.getUTCMilliseconds()}}serializeDate=function(e){if(e>-1/0&&e<1/0){t(e);e=(r<=0||r>=1e4?(r<0?"-":"+")+toPaddedString(6,r<0?-r:r):toPaddedString(4,r))+"-"+toPaddedString(2,i+1)+"-"+toPaddedString(2,s)+"T"+toPaddedString(2,o)+":"+toPaddedString(2,a)+":"+toPaddedString(2,c)+"."+toPaddedString(3,u)+"Z";r=i=s=o=a=c=u=null}else{e=null}return e};return serializeDate(e)};if(has("json-stringify")&&!has("date-serialization")){function dateToJSON(e){return serializeDate(this)}var x=t.stringify;t.stringify=function(e,t,r){var i=a.prototype.toJSON;a.prototype.toJSON=dateToJSON;var s=x(e,t,r);a.prototype.toJSON=i;return s}}else{var C="\\u00";var escapeChar=function(e){var t=e.charCodeAt(0),r=T[t];if(r){return r}return C+toPaddedString(2,t.toString(16))};var k=/[\x00-\x1f\x22\x5c]/g;var quote=function(e){k.lastIndex=0;return'"'+(k.test(e)?e.replace(k,escapeChar):e)+'"'};var serialize=function(e,t,r,i,s,n,o){var c,h,l,f,d,_,m,w,T;attempt((function(){c=t[e]}));if(typeof c=="object"&&c){if(c.getUTCFullYear&&p.call(c)==g&&c.toJSON===a.prototype.toJSON){c=serializeDate(c)}else if(typeof c.toJSON=="function"){c=c.toJSON(e)}}if(r){c=r.call(t,e,c)}if(c==v){return c===v?c:"null"}h=typeof c;if(h=="object"){l=p.call(c)}switch(l||h){case"boolean":case S:return""+c;case"number":case y:return c>-1/0&&c<1/0?""+c:"null";case"string":case b:return quote(""+c)}if(typeof c=="object"){for(m=o.length;m--;){if(o[m]===c){throw u()}}o.push(c);f=[];w=n;n+=s;if(l==E){for(_=0,m=c.length;_<m;_++){d=serialize(_,c,r,i,s,n,o);f.push(d===v?"null":d)}T=f.length?s?"[\n"+n+f.join(",\n"+n)+"\n"+w+"]":"["+f.join(",")+"]":"[]"}else{forOwn(i||c,(function(e){var t=serialize(e,c,r,i,s,n,o);if(t!==v){f.push(quote(e)+":"+(s?" ":"")+t)}}));T=f.length?s?"{\n"+n+f.join(",\n"+n)+"\n"+w+"}":"{"+f.join(",")+"}":"{}"}o.pop();return T}};t.stringify=function(e,t,r){var s,n,o,a;if(i[typeof t]&&t){a=p.call(t);if(a==m){n=t}else if(a==E){o={};for(var c=0,u=t.length,h;c<u;){h=t[c++];a=p.call(h);if(a=="[object String]"||a=="[object Number]"){o[h]=1}}}}if(r){a=p.call(r);if(a==y){if((r-=r%1)>0){if(r>10){r=10}for(s="";s.length<r;){s+=" "}}}else if(a==b){s=r.length<=10?r:r.slice(0,10)}}return serialize("",(h={},h[""]=e,h),n,o,s,"",[])}}}if(!has("json-parse")){var P=s.fromCharCode;var N={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var R,I;var abort=function(){R=I=null;throw c()};var lex=function(){var e=I,t=e.length,r,i,s,n,o;while(R<t){o=e.charCodeAt(R);switch(o){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:r=w?e.charAt(R):e[R];R++;return r;case 34:for(r="@",R++;R<t;){o=e.charCodeAt(R);if(o<32){abort()}else if(o==92){o=e.charCodeAt(++R);switch(o){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:r+=N[o];R++;break;case 117:i=++R;for(s=R+4;R<s;R++){o=e.charCodeAt(R);if(!(o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70)){abort()}}r+=P("0x"+e.slice(i,R));break;default:abort()}}else{if(o==34){break}o=e.charCodeAt(R);i=R;while(o>=32&&o!=92&&o!=34){o=e.charCodeAt(++R)}r+=e.slice(i,R)}}if(e.charCodeAt(R)==34){R++;return r}abort();default:i=R;if(o==45){n=true;o=e.charCodeAt(++R)}if(o>=48&&o<=57){if(o==48&&(o=e.charCodeAt(R+1),o>=48&&o<=57)){abort()}n=false;for(;R<t&&(o=e.charCodeAt(R),o>=48&&o<=57);R++);if(e.charCodeAt(R)==46){s=++R;for(;s<t;s++){o=e.charCodeAt(s);if(o<48||o>57){break}}if(s==R){abort()}R=s}o=e.charCodeAt(R);if(o==101||o==69){o=e.charCodeAt(++R);if(o==43||o==45){R++}for(s=R;s<t;s++){o=e.charCodeAt(s);if(o<48||o>57){break}}if(s==R){abort()}R=s}return+e.slice(i,R)}if(n){abort()}var a=e.slice(R,R+4);if(a=="true"){R+=4;return true}else if(a=="fals"&&e.charCodeAt(R+4)==101){R+=5;return false}else if(a=="null"){R+=4;return null}abort()}}return"$"};var get=function(e){var t,r;if(e=="$"){abort()}if(typeof e=="string"){if((w?e.charAt(0):e[0])=="@"){return e.slice(1)}if(e=="["){t=[];for(;;){e=lex();if(e=="]"){break}if(r){if(e==","){e=lex();if(e=="]"){abort()}}else{abort()}}else{r=true}if(e==","){abort()}t.push(get(e))}return t}else if(e=="{"){t={};for(;;){e=lex();if(e=="}"){break}if(r){if(e==","){e=lex();if(e=="}"){abort()}}else{abort()}}else{r=true}if(e==","||typeof e!="string"||(w?e.charAt(0):e[0])!="@"||lex()!=":"){abort()}t[e.slice(1)]=get(lex())}return t}abort()}return e};var update=function(e,t,r){var i=walk(e,t,r);if(i===v){delete e[t]}else{e[t]=i}};var walk=function(e,t,r){var i=e[t],s;if(typeof i=="object"&&i){if(p.call(i)==E){for(s=i.length;s--;){update(p,forOwn,i,s,r)}}else{forOwn(i,(function(e){update(i,e,r)}))}}return r.call(e,t,i)};t.parse=function(e,t){var r,i;R=0;I=""+e;r=get(lex());if(lex()!="$"){abort()}R=I=null;return t&&p.call(t)==m?walk((i={},i[""]=r,i),"",t):r}}}t.runInContext=runInContext;return t}if(s&&!r){runInContext(n,s)}else{var a=n.JSON,c=n.JSON3,u=false;var h=runInContext(n,n.JSON3={noConflict:function(){if(!u){u=true;n.JSON=a;n.JSON3=c;a=c=null}return h}});n.JSON={parse:h.parse,stringify:h.stringify}}if(r){define((function(){return h}))}}).call(this)},7816:(e,t,r)=>{"use strict";var i=r(2928);function origin(e){if("string"===typeof e)e=i(e);if(!e.protocol||!e.hostname)return"null";return(e.protocol+"//"+e.host).toLowerCase()}origin.same=function same(e,t){return origin(e)===origin(t)};e.exports=origin},1687:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty,i;function decode(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function encode(e){try{return encodeURIComponent(e)}catch(e){return null}}function querystring(e){var t=/([^=?#&]+)=?([^&]*)/g,r={},i;while(i=t.exec(e)){var s=decode(i[1]),n=decode(i[2]);if(s===null||n===null||s in r)continue;r[s]=n}return r}function querystringify(e,t){t=t||"";var s=[],n,o;if("string"!==typeof t)t="?";for(o in e){if(r.call(e,o)){n=e[o];if(!n&&(n===null||n===i||isNaN(n))){n=""}o=encode(o);n=encode(n);if(o===null||n===null)continue;s.push(o+"="+n)}}return s.length?t+s.join("&"):""}t.stringify=querystringify;t.parse=querystring},3118:e=>{"use strict";e.exports=function required(e,t){t=t.split(":")[0];e=+e;if(!e)return false;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return false}return e!==0}},5088:(e,t,r)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var i=r(4293);var s=i.Buffer;function copyProps(e,t){for(var r in e){t[r]=e[r]}}if(s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow){e.exports=i}else{copyProps(i,t);t.Buffer=SafeBuffer}function SafeBuffer(e,t,r){return s(e,t,r)}SafeBuffer.prototype=Object.create(s.prototype);copyProps(s,SafeBuffer);SafeBuffer.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return s(e,t,r)};SafeBuffer.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var i=s(e);if(t!==undefined){if(typeof r==="string"){i.fill(t,r)}else{i.fill(t)}}else{i.fill(0)}return i};SafeBuffer.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return s(e)};SafeBuffer.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return i.SlowBuffer(e)}},1114:(e,t,r)=>{"use strict";var i=r(8958);e.exports=r(7857)(i);if("_sockjs_onload"in global){setTimeout(global._sockjs_onload,1)}},4003:(e,t,r)=>{"use strict";var i=r(6919),s=r(518);function CloseEvent(){s.call(this);this.initEvent("close",false,false);this.wasClean=false;this.code=0;this.reason=""}i(CloseEvent,s);e.exports=CloseEvent},518:e=>{"use strict";function Event(e){this.type=e}Event.prototype.initEvent=function(e,t,r){this.type=e;this.bubbles=t;this.cancelable=r;this.timeStamp=+new Date;return this};Event.prototype.stopPropagation=function(){};Event.prototype.preventDefault=function(){};Event.CAPTURING_PHASE=1;Event.AT_TARGET=2;Event.BUBBLING_PHASE=3;e.exports=Event},4630:e=>{"use strict";function EventTarget(){this._listeners={}}EventTarget.prototype.addEventListener=function(e,t){if(!(e in this._listeners)){this._listeners[e]=[]}var r=this._listeners[e];if(r.indexOf(t)===-1){r=r.concat([t])}this._listeners[e]=r};EventTarget.prototype.removeEventListener=function(e,t){var r=this._listeners[e];if(!r){return}var i=r.indexOf(t);if(i!==-1){if(r.length>1){this._listeners[e]=r.slice(0,i).concat(r.slice(i+1))}else{delete this._listeners[e]}return}};EventTarget.prototype.dispatchEvent=function(){var e=arguments[0];var t=e.type;var r=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]){this["on"+t].apply(this,r)}if(t in this._listeners){var i=this._listeners[t];for(var s=0;s<i.length;s++){i[s].apply(this,r)}}};e.exports=EventTarget},1651:(e,t,r)=>{"use strict";var i=r(6919),s=r(518);function TransportMessageEvent(e){s.call(this);this.initEvent("message",false,false);this.data=e}i(TransportMessageEvent,s);e.exports=TransportMessageEvent},5976:(e,t,r)=>{"use strict";var i=r(6462),s=r(5683);function FacadeJS(e){this._transport=e;e.on("message",this._transportMessage.bind(this));e.on("close",this._transportClose.bind(this))}FacadeJS.prototype._transportClose=function(e,t){s.postMessage("c",i.stringify([e,t]))};FacadeJS.prototype._transportMessage=function(e){s.postMessage("t",e)};FacadeJS.prototype._send=function(e){this._transport.send(e)};FacadeJS.prototype._close=function(){this._transport.close();this._transport.removeAllListeners()};e.exports=FacadeJS},2020:(e,t,r)=>{"use strict";var i=r(7166),s=r(5297),n=r(6462),o=r(5976),a=r(5455),c=r(5683),u=r(1971);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:iframe-bootstrap")}e.exports=function(e,t){var r={};t.forEach((function(e){if(e.facadeTransport){r[e.facadeTransport.transportName]=e.facadeTransport}}));r[a.transportName]=a;var h;e.bootstrap_iframe=function(){var t;c.currentWindowId=u.hash.slice(1);var onMessage=function(s){if(s.source!==parent){return}if(typeof h==="undefined"){h=s.origin}if(s.origin!==h){return}var a;try{a=n.parse(s.data)}catch(e){debug("bad json",s.data);return}if(a.windowId!==c.currentWindowId){return}switch(a.type){case"s":var l;try{l=n.parse(a.data)}catch(e){debug("bad json",a.data);break}var f=l[0];var p=l[1];var d=l[2];var v=l[3];debug(f,p,d,v);if(f!==e.version){throw new Error("Incompatible SockJS! Main site uses:"+' "'+f+'", the iframe:'+' "'+e.version+'".')}if(!i.isOriginEqual(d,u.href)||!i.isOriginEqual(v,u.href)){throw new Error("Can't connect to different domain from within an "+"iframe. ("+u.href+", "+d+", "+v+")")}t=new o(new r[p](d,v));break;case"m":t._send(a.data);break;case"c":if(t){t._close()}t=null;break}};s.attachEvent("message",onMessage);c.postMessage("s")}}},8708:(e,t,r)=>{"use strict";var i=r(8080).EventEmitter,s=r(6919),n=r(6462),o=r(3662);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:info-ajax")}function InfoAjax(e,t){i.call(this);var r=this;var s=+new Date;this.xo=new t("GET",e);this.xo.once("finish",(function(e,t){var i,a;if(e===200){a=+new Date-s;if(t){try{i=n.parse(t)}catch(e){debug("bad json",t)}}if(!o.isObject(i)){i={}}}r.emit("finish",i,a);r.removeAllListeners()}))}s(InfoAjax,i);InfoAjax.prototype.close=function(){this.removeAllListeners();this.xo.close()};e.exports=InfoAjax},5455:(e,t,r)=>{"use strict";var i=r(6919),s=r(8080).EventEmitter,n=r(6462),o=r(5754),a=r(8708);function InfoReceiverIframe(e){var t=this;s.call(this);this.ir=new a(e,o);this.ir.once("finish",(function(e,r){t.ir=null;t.emit("message",n.stringify([e,r]))}))}i(InfoReceiverIframe,s);InfoReceiverIframe.transportName="iframe-info-receiver";InfoReceiverIframe.prototype.close=function(){if(this.ir){this.ir.close();this.ir=null}this.removeAllListeners()};e.exports=InfoReceiverIframe},6777:(e,t,r)=>{"use strict";var i=r(8080).EventEmitter,s=r(6919),n=r(6462),o=r(5297),a=r(5869),c=r(5455);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:info-iframe")}function InfoIframe(e,t){var r=this;i.call(this);var go=function(){var i=r.ifr=new a(c.transportName,t,e);i.once("message",(function(e){if(e){var t;try{t=n.parse(e)}catch(t){debug("bad json",e);r.emit("finish");r.close();return}var i=t[0],s=t[1];r.emit("finish",i,s)}r.close()}));i.once("close",(function(){r.emit("finish");r.close()}))};if(!global.document.body){o.attachEvent("load",go)}else{go()}}s(InfoIframe,i);InfoIframe.enabled=function(){return a.enabled()};InfoIframe.prototype.close=function(){if(this.ifr){this.ifr.close()}this.removeAllListeners();this.ifr=null};e.exports=InfoIframe},9235:(e,t,r)=>{"use strict";var i=r(8080).EventEmitter,s=r(6919),n=r(7166),o=r(7104),a=r(6283),c=r(5754),u=r(5236),h=r(6777),l=r(8708);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:info-receiver")}function InfoReceiver(e,t){debug(e);var r=this;i.call(this);setTimeout((function(){r.doXhr(e,t)}),0)}s(InfoReceiver,i);InfoReceiver._getReceiver=function(e,t,r){if(r.sameOrigin){return new l(t,c)}if(a.enabled){return new l(t,a)}if(o.enabled&&r.sameScheme){return new l(t,o)}if(h.enabled()){return new h(e,t)}return new l(t,u)};InfoReceiver.prototype.doXhr=function(e,t){var r=this,i=n.addPath(e,"/info");debug("doXhr",i);this.xo=InfoReceiver._getReceiver(e,i,t);this.timeoutRef=setTimeout((function(){debug("timeout");r._cleanup(false);r.emit("finish")}),InfoReceiver.timeout);this.xo.once("finish",(function(e,t){debug("finish",e,t);r._cleanup(true);r.emit("finish",e,t)}))};InfoReceiver.prototype._cleanup=function(e){debug("_cleanup");clearTimeout(this.timeoutRef);this.timeoutRef=null;if(!e&&this.xo){this.xo.close()}this.xo=null};InfoReceiver.prototype.close=function(){debug("close");this.removeAllListeners();this._cleanup(false)};InfoReceiver.timeout=8e3;e.exports=InfoReceiver},1971:e=>{"use strict";e.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},7857:(e,t,r)=>{"use strict";r(7115);var i=r(2928),s=r(6919),n=r(6462),o=r(9342),a=r(3833),c=r(7166),u=r(5297),h=r(9503),l=r(3662),f=r(6378),p=r(5273),d=r(518),v=r(4630),_=r(1971),m=r(4003),g=r(1651),y=r(9235);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:main")}var b;function SockJS(e,t,r){if(!(this instanceof SockJS)){return new SockJS(e,t,r)}if(arguments.length<1){throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present")}v.call(this);this.readyState=SockJS.CONNECTING;this.extensions="";this.protocol="";r=r||{};if(r.protocols_whitelist){p.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead.")}this._transportsWhitelist=r.transports;this._transportOptions=r.transportOptions||{};this._timeout=r.timeout||0;var s=r.sessionId||8;if(typeof s==="function"){this._generateSessionId=s}else if(typeof s==="number"){this._generateSessionId=function(){return o.string(s)}}else{throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.")}this._server=r.server||o.numberString(1e3);var n=new i(e);if(!n.host||!n.protocol){throw new SyntaxError("The URL '"+e+"' is invalid")}else if(n.hash){throw new SyntaxError("The URL must not contain a fragment")}else if(n.protocol!=="http:"&&n.protocol!=="https:"){throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+n.protocol+"' is not allowed.")}var a=n.protocol==="https:";if(_.protocol==="https:"&&!a){if(!c.isLoopbackAddr(n.hostname)){throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS")}}if(!t){t=[]}else if(!Array.isArray(t)){t=[t]}var u=t.sort();u.forEach((function(e,t){if(!e){throw new SyntaxError("The protocols entry '"+e+"' is invalid.")}if(t<u.length-1&&e===u[t+1]){throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}}));var h=c.getOrigin(_.href);this._origin=h?h.toLowerCase():null;n.set("pathname",n.pathname.replace(/\/+$/,""));this.url=n.href;debug("using url",this.url);this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:c.isOriginEqual(this.url,_.href),sameScheme:c.isSchemeEqual(this.url,_.href)};this._ir=new y(this.url,this._urlInfo);this._ir.once("finish",this._receiveInfo.bind(this))}s(SockJS,v);function userSetCode(e){return e===1e3||e>=3e3&&e<=4999}SockJS.prototype.close=function(e,t){if(e&&!userSetCode(e)){throw new Error("InvalidAccessError: Invalid code")}if(t&&t.length>123){throw new SyntaxError("reason argument has an invalid length")}if(this.readyState===SockJS.CLOSING||this.readyState===SockJS.CLOSED){return}var r=true;this._close(e||1e3,t||"Normal closure",r)};SockJS.prototype.send=function(e){if(typeof e!=="string"){e=""+e}if(this.readyState===SockJS.CONNECTING){throw new Error("InvalidStateError: The connection has not been established yet")}if(this.readyState!==SockJS.OPEN){return}this._transport.send(a.quote(e))};SockJS.version=r(2336);SockJS.CONNECTING=0;SockJS.OPEN=1;SockJS.CLOSING=2;SockJS.CLOSED=3;SockJS.prototype._receiveInfo=function(e,t){debug("_receiveInfo",t);this._ir=null;if(!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t);this._transUrl=e.base_url?e.base_url:this.url;e=l.extend(e,this._urlInfo);debug("info",e);var r=b.filterToEnabled(this._transportsWhitelist,e);this._transports=r.main;debug(this._transports.length+" enabled transports");this._connect()};SockJS.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){debug("attempt",e.transportName);if(e.needBody){if(!global.document.body||typeof global.document.readyState!=="undefined"&&global.document.readyState!=="complete"&&global.document.readyState!=="interactive"){debug("waiting for body");this._transports.unshift(e);u.attachEvent("load",this._connect.bind(this));return}}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);debug("using timeout",t);var r=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId());var i=this._transportOptions[e.transportName];debug("transport url",r);var s=new e(r,this._transUrl,i);s.on("message",this._transportMessage.bind(this));s.once("close",this._transportClose.bind(this));s.transportName=e.transportName;this._transport=s;return}this._close(2e3,"All transports failed",false)};SockJS.prototype._transportTimeout=function(){debug("_transportTimeout");if(this.readyState===SockJS.CONNECTING){if(this._transport){this._transport.close()}this._transportClose(2007,"Transport timed out")}};SockJS.prototype._transportMessage=function(e){debug("_transportMessage",e);var t=this,r=e.slice(0,1),i=e.slice(1),s;switch(r){case"o":this._open();return;case"h":this.dispatchEvent(new d("heartbeat"));debug("heartbeat",this.transport);return}if(i){try{s=n.parse(i)}catch(e){debug("bad json",i)}}if(typeof s==="undefined"){debug("empty payload",i);return}switch(r){case"a":if(Array.isArray(s)){s.forEach((function(e){debug("message",t.transport,e);t.dispatchEvent(new g(e))}))}break;case"m":debug("message",this.transport,s);this.dispatchEvent(new g(s));break;case"c":if(Array.isArray(s)&&s.length===2){this._close(s[0],s[1],true)}break}};SockJS.prototype._transportClose=function(e,t){debug("_transportClose",this.transport,e,t);if(this._transport){this._transport.removeAllListeners();this._transport=null;this.transport=null}if(!userSetCode(e)&&e!==2e3&&this.readyState===SockJS.CONNECTING){this._connect();return}this._close(e,t)};SockJS.prototype._open=function(){debug("_open",this._transport&&this._transport.transportName,this.readyState);if(this.readyState===SockJS.CONNECTING){if(this._transportTimeoutId){clearTimeout(this._transportTimeoutId);this._transportTimeoutId=null}this.readyState=SockJS.OPEN;this.transport=this._transport.transportName;this.dispatchEvent(new d("open"));debug("connected",this.transport)}else{this._close(1006,"Server lost session")}};SockJS.prototype._close=function(e,t,r){debug("_close",this.transport,e,t,r,this.readyState);var i=false;if(this._ir){i=true;this._ir.close();this._ir=null}if(this._transport){this._transport.close();this._transport=null;this.transport=null}if(this.readyState===SockJS.CLOSED){throw new Error("InvalidStateError: SockJS has already been closed")}this.readyState=SockJS.CLOSING;setTimeout(function(){this.readyState=SockJS.CLOSED;if(i){this.dispatchEvent(new d("error"))}var s=new m("close");s.wasClean=r||false;s.code=e||1e3;s.reason=t;this.dispatchEvent(s);this.onmessage=this.onclose=this.onerror=null;debug("disconnected")}.bind(this),0)};SockJS.prototype.countRTO=function(e){if(e>100){return 4*e}return 300+e};e.exports=function(e){b=h(e);r(2020)(SockJS,e);return SockJS}},7115:()=>{"use strict";var e=Array.prototype;var t=Object.prototype;var r=Function.prototype;var i=String.prototype;var s=e.slice;var n=t.toString;var isFunction=function(e){return t.toString.call(e)==="[object Function]"};var o=function isArray(e){return n.call(e)==="[object Array]"};var a=function isString(e){return n.call(e)==="[object String]"};var c=Object.defineProperty&&function(){try{Object.defineProperty({},"x",{});return true}catch(e){return false}}();var u;if(c){u=function(e,t,r,i){if(!i&&t in e){return}Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}}else{u=function(e,t,r,i){if(!i&&t in e){return}e[t]=r}}var defineProperties=function(e,r,i){for(var s in r){if(t.hasOwnProperty.call(r,s)){u(e,s,r[s],i)}}};var toObject=function(e){if(e==null){throw new TypeError("can't convert "+e+" to object")}return Object(e)};function toInteger(e){var t=+e;if(t!==t){t=0}else if(t!==0&&t!==1/0&&t!==-(1/0)){t=(t>0||-1)*Math.floor(Math.abs(t))}return t}function ToUint32(e){return e>>>0}function Empty(){}defineProperties(r,{bind:function bind(e){var t=this;if(!isFunction(t)){throw new TypeError("Function.prototype.bind called on incompatible "+t)}var r=s.call(arguments,1);var binder=function(){if(this instanceof a){var i=t.apply(this,r.concat(s.call(arguments)));if(Object(i)===i){return i}return this}else{return t.apply(e,r.concat(s.call(arguments)))}};var i=Math.max(0,t.length-r.length);var n=[];for(var o=0;o<i;o++){n.push("$"+o)}var a=Function("binder","return function ("+n.join(",")+"){ return binder.apply(this, arguments); }")(binder);if(t.prototype){Empty.prototype=t.prototype;a.prototype=new Empty;Empty.prototype=null}return a}});defineProperties(Array,{isArray:o});var h=Object("a");var l=h[0]!=="a"||!(0 in h);var f=function properlyBoxed(e){var t=true;var r=true;if(e){e.call("foo",(function(e,r,i){if(typeof i!=="object"){t=false}}));e.call([1],(function(){"use strict";r=typeof this==="string"}),"x")}return!!e&&t&&r};defineProperties(e,{forEach:function forEach(e){var t=toObject(this),r=l&&a(this)?this.split(""):t,i=arguments[1],s=-1,n=r.length>>>0;if(!isFunction(e)){throw new TypeError}while(++s<n){if(s in r){e.call(i,r[s],s,t)}}}},!f(e.forEach));var p=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;defineProperties(e,{indexOf:function indexOf(e){var t=l&&a(this)?this.split(""):toObject(this),r=t.length>>>0;if(!r){return-1}var i=0;if(arguments.length>1){i=toInteger(arguments[1])}i=i>=0?i:Math.max(0,r+i);for(;i<r;i++){if(i in t&&t[i]===e){return i}}return-1}},p);var d=i.split;if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=/()??/.exec("")[1]===void 0;i.split=function(r,i){var s=this;if(r===void 0&&i===0){return[]}if(n.call(r)!=="[object RegExp]"){return d.call(this,r,i)}var o=[],a=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),c=0,u,h,l,f;r=new RegExp(r.source,a+"g");s+="";if(!t){u=new RegExp("^"+r.source+"$(?!\\s)",a)}i=i===void 0?-1>>>0:ToUint32(i);while(h=r.exec(s)){l=h.index+h[0].length;if(l>c){o.push(s.slice(c,h.index));if(!t&&h.length>1){h[0].replace(u,(function(){for(var e=1;e<arguments.length-2;e++){if(arguments[e]===void 0){h[e]=void 0}}}))}if(h.length>1&&h.index<s.length){e.push.apply(o,h.slice(1))}f=h[0].length;c=l;if(o.length>=i){break}}if(r.lastIndex===h.index){r.lastIndex++}}if(c===s.length){if(f||!r.test("")){o.push("")}}else{o.push(s.slice(c))}return o.length>i?o.slice(0,i):o}})()}else if("0".split(void 0,0).length){i.split=function split(e,t){if(e===void 0&&t===0){return[]}return d.call(this,e,t)}}var v=i.substr;var _="".substr&&"0b".substr(-1)!=="b";defineProperties(i,{substr:function substr(e,t){return v.call(this,e<0?(e=this.length+e)<0?0:e:e,t)}},_)},8958:(e,t,r)=>{"use strict";e.exports=[r(1954),r(8235),r(1033),r(2458),r(691)(r(2458)),r(8438),r(691)(r(8438)),r(2238),r(2923),r(691)(r(2238)),r(3254)]},3802:(e,t,r)=>{e.exports=r(2178).Client},1222:(e,t,r)=>{"use strict";var i=r(8080).EventEmitter,s=r(6919),n=r(8605),o=r(7211),a=r(2928);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:driver:xhr")}function XhrDriver(e,t,r,s){debug(e,t,r);var c=this;i.call(this);var u=new a(t);var h={method:e,hostname:u.hostname.replace(/\[|\]/g,""),port:u.port,path:u.pathname+(u.query||""),headers:s&&s.headers,agent:false};var l=u.protocol==="https:"?o:n;this.req=l.request(h,(function(e){e.setEncoding("utf8");var t="";e.on("data",(function(e){debug("data",e);t+=e;c.emit("chunk",200,t)}));e.once("end",(function(){debug("end");c.emit("finish",e.statusCode,t);c.req=null}))}));this.req.on("error",(function(e){debug("error",e);c.emit("finish",0,e.message)}));if(r){this.req.write(r)}this.req.end()}s(XhrDriver,i);XhrDriver.prototype.close=function(){debug("close");this.removeAllListeners();if(this.req){this.req.abort();this.req=null}};XhrDriver.enabled=true;XhrDriver.supportsCORS=true;e.exports=XhrDriver},2458:(e,t,r)=>{"use strict";var i=r(6919),s=r(5378),n=r(5590),o=r(6283),a=r(4477);function EventSourceTransport(e){if(!EventSourceTransport.enabled()){throw new Error("Transport created when disabled")}s.call(this,e,"/eventsource",n,o)}i(EventSourceTransport,s);EventSourceTransport.enabled=function(){return!!a};EventSourceTransport.transportName="eventsource";EventSourceTransport.roundTrips=2;e.exports=EventSourceTransport},8438:(e,t,r)=>{"use strict";var i=r(6919),s=r(1019),n=r(5754),o=r(5378);function HtmlFileTransport(e){if(!s.enabled){throw new Error("Transport created when disabled")}o.call(this,e,"/htmlfile",s,n)}i(HtmlFileTransport,o);HtmlFileTransport.enabled=function(e){return s.enabled&&e.sameOrigin};HtmlFileTransport.transportName="htmlfile";HtmlFileTransport.roundTrips=2;e.exports=HtmlFileTransport},5869:(e,t,r)=>{"use strict";var i=r(6919),s=r(6462),n=r(8080).EventEmitter,o=r(2336),a=r(7166),c=r(5683),u=r(5297),h=r(9342);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:transport:iframe")}function IframeTransport(e,t,r){if(!IframeTransport.enabled()){throw new Error("Transport created when disabled")}n.call(this);var i=this;this.origin=a.getOrigin(r);this.baseUrl=r;this.transUrl=t;this.transport=e;this.windowId=h.string(8);var s=a.addPath(r,"/iframe.html")+"#"+this.windowId;debug(e,t,s);this.iframeObj=c.createIframe(s,(function(e){debug("err callback");i.emit("close",1006,"Unable to load an iframe ("+e+")");i.close()}));this.onmessageCallback=this._message.bind(this);u.attachEvent("message",this.onmessageCallback)}i(IframeTransport,n);IframeTransport.prototype.close=function(){debug("close");this.removeAllListeners();if(this.iframeObj){u.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup();this.iframeObj=null;this.onmessageCallback=this.iframeObj=null}};IframeTransport.prototype._message=function(e){debug("message",e.data);if(!a.isOriginEqual(e.origin,this.origin)){debug("not same origin",e.origin,this.origin);return}var t;try{t=s.parse(e.data)}catch(t){debug("bad json",e.data);return}if(t.windowId!==this.windowId){debug("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded();this.postMessage("s",s.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var r;try{r=s.parse(t.data)}catch(e){debug("bad json",t.data);return}this.emit("close",r[0],r[1]);this.close();break}};IframeTransport.prototype.postMessage=function(e,t){debug("postMessage",e,t);this.iframeObj.post(s.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)};IframeTransport.prototype.send=function(e){debug("send",e);this.postMessage("m",e)};IframeTransport.enabled=function(){return c.iframeEnabled};IframeTransport.transportName="iframe";IframeTransport.roundTrips=2;e.exports=IframeTransport},3254:(e,t,r)=>{"use strict";var i=r(6919),s=r(1749),n=r(4511),o=r(2332);function JsonPTransport(e){if(!JsonPTransport.enabled()){throw new Error("Transport created when disabled")}s.call(this,e,"/jsonp",o,n)}i(JsonPTransport,s);JsonPTransport.enabled=function(){return!!global.document};JsonPTransport.transportName="jsonp-polling";JsonPTransport.roundTrips=1;JsonPTransport.needBody=true;e.exports=JsonPTransport},5378:(e,t,r)=>{"use strict";var i=r(6919),s=r(7166),n=r(1749);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:ajax-based")}function createAjaxSender(e){return function(t,r,i){debug("create ajax sender",t,r);var n={};if(typeof r==="string"){n.headers={"Content-type":"text/plain"}}var o=s.addPath(t,"/xhr_send");var a=new e("POST",o,r,n);a.once("finish",(function(e){debug("finish",e);a=null;if(e!==200&&e!==204){return i(new Error("http status "+e))}i()}));return function(){debug("abort");a.close();a=null;var e=new Error("Aborted");e.code=1e3;i(e)}}}function AjaxBasedTransport(e,t,r,i){n.call(this,e,t,createAjaxSender(i),r,i)}i(AjaxBasedTransport,n);e.exports=AjaxBasedTransport},7566:(e,t,r)=>{"use strict";var i=r(6919),s=r(8080).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:buffered-sender")}function BufferedSender(e,t){debug(e);s.call(this);this.sendBuffer=[];this.sender=t;this.url=e}i(BufferedSender,s);BufferedSender.prototype.send=function(e){debug("send",e);this.sendBuffer.push(e);if(!this.sendStop){this.sendSchedule()}};BufferedSender.prototype.sendScheduleWait=function(){debug("sendScheduleWait");var e=this;var t;this.sendStop=function(){debug("sendStop");e.sendStop=null;clearTimeout(t)};t=setTimeout((function(){debug("timeout");e.sendStop=null;e.sendSchedule()}),25)};BufferedSender.prototype.sendSchedule=function(){debug("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null;if(t){debug("error",t);e.emit("close",t.code||1006,"Sending error: "+t);e.close()}else{e.sendScheduleWait()}}));this.sendBuffer=[]}};BufferedSender.prototype._cleanup=function(){debug("_cleanup");this.removeAllListeners()};BufferedSender.prototype.close=function(){debug("close");this._cleanup();if(this.sendStop){this.sendStop();this.sendStop=null}};e.exports=BufferedSender},691:(e,t,r)=>{"use strict";var i=r(6919),s=r(5869),n=r(3662);e.exports=function(e){function IframeWrapTransport(t,r){s.call(this,e.transportName,t,r)}i(IframeWrapTransport,s);IframeWrapTransport.enabled=function(t,r){if(!global.document){return false}var i=n.extend({},r);i.sameOrigin=true;return e.enabled(i)&&s.enabled()};IframeWrapTransport.transportName="iframe-"+e.transportName;IframeWrapTransport.needBody=true;IframeWrapTransport.roundTrips=s.roundTrips+e.roundTrips-1;IframeWrapTransport.facadeTransport=e;return IframeWrapTransport}},8222:(e,t,r)=>{"use strict";var i=r(6919),s=r(8080).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:polling")}function Polling(e,t,r){debug(t);s.call(this);this.Receiver=e;this.receiveUrl=t;this.AjaxObject=r;this._scheduleReceiver()}i(Polling,s);Polling.prototype._scheduleReceiver=function(){debug("_scheduleReceiver");var e=this;var t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){debug("message",t);e.emit("message",t)}));t.once("close",(function(r,i){debug("close",r,i,e.pollIsClosing);e.poll=t=null;if(!e.pollIsClosing){if(i==="network"){e._scheduleReceiver()}else{e.emit("close",r||1006,i);e.removeAllListeners()}}}))};Polling.prototype.abort=function(){debug("abort");this.removeAllListeners();this.pollIsClosing=true;if(this.poll){this.poll.abort()}};e.exports=Polling},1749:(e,t,r)=>{"use strict";var i=r(6919),s=r(7166),n=r(7566),o=r(8222);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:sender-receiver")}function SenderReceiver(e,t,r,i,a){var c=s.addPath(e,t);debug(c);var u=this;n.call(this,e,r);this.poll=new o(i,c,a);this.poll.on("message",(function(e){debug("poll message",e);u.emit("message",e)}));this.poll.once("close",(function(e,t){debug("poll close",e,t);u.poll=null;u.emit("close",e,t);u.close()}))}i(SenderReceiver,n);SenderReceiver.prototype.close=function(){n.prototype.close.call(this);debug("close");this.removeAllListeners();if(this.poll){this.poll.abort();this.poll=null}};e.exports=SenderReceiver},5590:(e,t,r)=>{"use strict";var i=r(6919),s=r(8080).EventEmitter,n=r(4477);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:receiver:eventsource")}function EventSourceReceiver(e){debug(e);s.call(this);var t=this;var r=this.es=new n(e);r.onmessage=function(e){debug("message",e.data);t.emit("message",decodeURI(e.data))};r.onerror=function(e){debug("error",r.readyState,e);var i=r.readyState!==2?"network":"permanent";t._cleanup();t._close(i)}}i(EventSourceReceiver,s);EventSourceReceiver.prototype.abort=function(){debug("abort");this._cleanup();this._close("user")};EventSourceReceiver.prototype._cleanup=function(){debug("cleanup");var e=this.es;if(e){e.onmessage=e.onerror=null;e.close();this.es=null}};EventSourceReceiver.prototype._close=function(e){debug("close",e);var t=this;setTimeout((function(){t.emit("close",null,e);t.removeAllListeners()}),200)};e.exports=EventSourceReceiver},1019:(e,t,r)=>{"use strict";var i=r(6919),s=r(5683),n=r(7166),o=r(8080).EventEmitter,a=r(9342);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:receiver:htmlfile")}function HtmlfileReceiver(e){debug(e);o.call(this);var t=this;s.polluteGlobalNamespace();this.id="a"+a.string(6);e=n.addQuery(e,"c="+decodeURIComponent(s.WPrefix+"."+this.id));debug("using htmlfile",HtmlfileReceiver.htmlfileEnabled);var r=HtmlfileReceiver.htmlfileEnabled?s.createHtmlfile:s.createIframe;global[s.WPrefix][this.id]={start:function(){debug("start");t.iframeObj.loaded()},message:function(e){debug("message",e);t.emit("message",e)},stop:function(){debug("stop");t._cleanup();t._close("network")}};this.iframeObj=r(e,(function(){debug("callback");t._cleanup();t._close("permanent")}))}i(HtmlfileReceiver,o);HtmlfileReceiver.prototype.abort=function(){debug("abort");this._cleanup();this._close("user")};HtmlfileReceiver.prototype._cleanup=function(){debug("_cleanup");if(this.iframeObj){this.iframeObj.cleanup();this.iframeObj=null}delete global[s.WPrefix][this.id]};HtmlfileReceiver.prototype._close=function(e){debug("_close",e);this.emit("close",null,e);this.removeAllListeners()};HtmlfileReceiver.htmlfileEnabled=false;var c=["Active"].concat("Object").join("X");if(c in global){try{HtmlfileReceiver.htmlfileEnabled=!!new global[c]("htmlfile")}catch(e){}}HtmlfileReceiver.enabled=HtmlfileReceiver.htmlfileEnabled||s.iframeEnabled;e.exports=HtmlfileReceiver},4511:(e,t,r)=>{"use strict";var i=r(5683),s=r(9342),n=r(6378),o=r(7166),a=r(6919),c=r(8080).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:receiver:jsonp")}function JsonpReceiver(e){debug(e);var t=this;c.call(this);i.polluteGlobalNamespace();this.id="a"+s.string(6);var r=o.addQuery(e,"c="+encodeURIComponent(i.WPrefix+"."+this.id));global[i.WPrefix][this.id]=this._callback.bind(this);this._createScript(r);this.timeoutId=setTimeout((function(){debug("timeout");t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),JsonpReceiver.timeout)}a(JsonpReceiver,c);JsonpReceiver.prototype.abort=function(){debug("abort");if(global[i.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3;this._abort(e)}};JsonpReceiver.timeout=35e3;JsonpReceiver.scriptErrorTimeout=1e3;JsonpReceiver.prototype._callback=function(e){debug("_callback",e);this._cleanup();if(this.aborting){return}if(e){debug("message",e);this.emit("message",e)}this.emit("close",null,"network");this.removeAllListeners()};JsonpReceiver.prototype._abort=function(e){debug("_abort",e);this._cleanup();this.aborting=true;this.emit("close",e.code,e.message);this.removeAllListeners()};JsonpReceiver.prototype._cleanup=function(){debug("_cleanup");clearTimeout(this.timeoutId);if(this.script2){this.script2.parentNode.removeChild(this.script2);this.script2=null}if(this.script){var e=this.script;e.parentNode.removeChild(e);e.onreadystatechange=e.onerror=e.onload=e.onclick=null;this.script=null}delete global[i.WPrefix][this.id]};JsonpReceiver.prototype._scriptError=function(){debug("_scriptError");var e=this;if(this.errorTimer){return}this.errorTimer=setTimeout((function(){if(!e.loadedOkay){e._abort(new Error("JSONP script loaded abnormally (onerror)"))}}),JsonpReceiver.scriptErrorTimeout)};JsonpReceiver.prototype._createScript=function(e){debug("_createScript",e);var t=this;var r=this.script=global.document.createElement("script");var i;r.id="a"+s.string(8);r.src=e;r.type="text/javascript";r.charset="UTF-8";r.onerror=this._scriptError.bind(this);r.onload=function(){debug("onload");t._abort(new Error("JSONP script loaded abnormally (onload)"))};r.onreadystatechange=function(){debug("onreadystatechange",r.readyState);if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){t.loadedOkay=true;try{r.onclick()}catch(e){}}if(r){t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}}};if(typeof r.async==="undefined"&&global.document.attachEvent){if(!n.isOpera()){try{r.htmlFor=r.id;r.event="onclick"}catch(e){}r.async=true}else{i=this.script2=global.document.createElement("script");i.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};";r.async=i.async=false}}if(typeof r.async!=="undefined"){r.async=true}var o=global.document.getElementsByTagName("head")[0];o.insertBefore(r,o.firstChild);if(i){o.insertBefore(i,o.firstChild)}};e.exports=JsonpReceiver},7083:(e,t,r)=>{"use strict";var i=r(6919),s=r(8080).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:receiver:xhr")}function XhrReceiver(e,t){debug(e);s.call(this);var r=this;this.bufferPosition=0;this.xo=new t("POST",e,null);this.xo.on("chunk",this._chunkHandler.bind(this));this.xo.once("finish",(function(e,t){debug("finish",e,t);r._chunkHandler(e,t);r.xo=null;var i=e===200?"network":"permanent";debug("close",i);r.emit("close",null,i);r._cleanup()}))}i(XhrReceiver,s);XhrReceiver.prototype._chunkHandler=function(e,t){debug("_chunkHandler",e);if(e!==200||!t){return}for(var r=-1;;this.bufferPosition+=r+1){var i=t.slice(this.bufferPosition);r=i.indexOf("\n");if(r===-1){break}var s=i.slice(0,r);if(s){debug("message",s);this.emit("message",s)}}};XhrReceiver.prototype._cleanup=function(){debug("_cleanup");this.removeAllListeners()};XhrReceiver.prototype.abort=function(){debug("abort");if(this.xo){this.xo.close();debug("close");this.emit("close",null,"user");this.xo=null}this._cleanup()};e.exports=XhrReceiver},2332:(e,t,r)=>{"use strict";var i=r(9342),s=r(7166);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:sender:jsonp")}var n,o;function createIframe(e){debug("createIframe",e);try{return global.document.createElement('<iframe name="'+e+'">')}catch(r){var t=global.document.createElement("iframe");t.name=e;return t}}function createForm(){debug("createForm");n=global.document.createElement("form");n.style.display="none";n.style.position="absolute";n.method="POST";n.enctype="application/x-www-form-urlencoded";n.acceptCharset="UTF-8";o=global.document.createElement("textarea");o.name="d";n.appendChild(o);global.document.body.appendChild(n)}e.exports=function(e,t,r){debug(e,t);if(!n){createForm()}var a="a"+i.string(8);n.target=a;n.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+a);var c=createIframe(a);c.id=a;c.style.display="none";n.appendChild(c);try{o.value=t}catch(e){}n.submit();var completed=function(e){debug("completed",a,e);if(!c.onerror){return}c.onreadystatechange=c.onerror=c.onload=null;setTimeout((function(){debug("cleaning up",a);c.parentNode.removeChild(c);c=null}),500);o.value="";r(e)};c.onerror=function(){debug("onerror",a);completed()};c.onload=function(){debug("onload",a);completed()};c.onreadystatechange=function(e){debug("onreadystatechange",a,c.readyState,e);if(c.readyState==="complete"){completed()}};return function(){debug("aborted",a);completed(new Error("Aborted"))}}},7104:(e,t,r)=>{"use strict";var i=r(8080).EventEmitter,s=r(6919),n=r(5297),o=r(6378),a=r(7166);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:sender:xdr")}function XDRObject(e,t,r){debug(e,t);var s=this;i.call(this);setTimeout((function(){s._start(e,t,r)}),0)}s(XDRObject,i);XDRObject.prototype._start=function(e,t,r){debug("_start");var i=this;var s=new global.XDomainRequest;t=a.addQuery(t,"t="+ +new Date);s.onerror=function(){debug("onerror");i._error()};s.ontimeout=function(){debug("ontimeout");i._error()};s.onprogress=function(){debug("progress",s.responseText);i.emit("chunk",200,s.responseText)};s.onload=function(){debug("load");i.emit("finish",200,s.responseText);i._cleanup(false)};this.xdr=s;this.unloadRef=n.unloadAdd((function(){i._cleanup(true)}));try{this.xdr.open(e,t);if(this.timeout){this.xdr.timeout=this.timeout}this.xdr.send(r)}catch(e){this._error()}};XDRObject.prototype._error=function(){this.emit("finish",0,"");this._cleanup(false)};XDRObject.prototype._cleanup=function(e){debug("cleanup",e);if(!this.xdr){return}this.removeAllListeners();n.unloadDel(this.unloadRef);this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null;if(e){try{this.xdr.abort()}catch(e){}}this.unloadRef=this.xdr=null};XDRObject.prototype.close=function(){debug("close");this._cleanup(true)};XDRObject.enabled=!!(global.XDomainRequest&&o.hasDomain());e.exports=XDRObject},6283:(e,t,r)=>{"use strict";var i=r(6919),s=r(1222);function XHRCorsObject(e,t,r,i){s.call(this,e,t,r,i)}i(XHRCorsObject,s);XHRCorsObject.enabled=s.enabled&&s.supportsCORS;e.exports=XHRCorsObject},5236:(e,t,r)=>{"use strict";var i=r(8080).EventEmitter,s=r(6919);function XHRFake(){var e=this;i.call(this);this.to=setTimeout((function(){e.emit("finish",200,"{}")}),XHRFake.timeout)}s(XHRFake,i);XHRFake.prototype.close=function(){clearTimeout(this.to)};XHRFake.timeout=2e3;e.exports=XHRFake},5754:(e,t,r)=>{"use strict";var i=r(6919),s=r(1222);function XHRLocalObject(e,t,r){s.call(this,e,t,r,{noCredentials:true})}i(XHRLocalObject,s);XHRLocalObject.enabled=s.enabled;e.exports=XHRLocalObject},1954:(e,t,r)=>{"use strict";var i=r(5297),s=r(7166),n=r(6919),o=r(8080).EventEmitter,a=r(3802);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:websocket")}function WebSocketTransport(e,t,r){if(!WebSocketTransport.enabled()){throw new Error("Transport created when disabled")}o.call(this);debug("constructor",e);var n=this;var c=s.addPath(e,"/websocket");if(c.slice(0,5)==="https"){c="wss"+c.slice(5)}else{c="ws"+c.slice(4)}this.url=c;this.ws=new a(this.url,[],r);this.ws.onmessage=function(e){debug("message event",e.data);n.emit("message",e.data)};this.unloadRef=i.unloadAdd((function(){debug("unload");n.ws.close()}));this.ws.onclose=function(e){debug("close event",e.code,e.reason);n.emit("close",e.code,e.reason);n._cleanup()};this.ws.onerror=function(e){debug("error event",e);n.emit("close",1006,"WebSocket connection broken");n._cleanup()}}n(WebSocketTransport,o);WebSocketTransport.prototype.send=function(e){var t="["+e+"]";debug("send",t);this.ws.send(t)};WebSocketTransport.prototype.close=function(){debug("close");var e=this.ws;this._cleanup();if(e){e.close()}};WebSocketTransport.prototype._cleanup=function(){debug("_cleanup");var e=this.ws;if(e){e.onmessage=e.onclose=e.onerror=null}i.unloadDel(this.unloadRef);this.unloadRef=this.ws=null;this.removeAllListeners()};WebSocketTransport.enabled=function(){debug("enabled");return!!a};WebSocketTransport.transportName="websocket";WebSocketTransport.roundTrips=2;e.exports=WebSocketTransport},2923:(e,t,r)=>{"use strict";var i=r(6919),s=r(5378),n=r(1033),o=r(7083),a=r(7104);function XdrPollingTransport(e){if(!a.enabled){throw new Error("Transport created when disabled")}s.call(this,e,"/xhr",o,a)}i(XdrPollingTransport,s);XdrPollingTransport.enabled=n.enabled;XdrPollingTransport.transportName="xdr-polling";XdrPollingTransport.roundTrips=2;e.exports=XdrPollingTransport},1033:(e,t,r)=>{"use strict";var i=r(6919),s=r(5378),n=r(7083),o=r(7104);function XdrStreamingTransport(e){if(!o.enabled){throw new Error("Transport created when disabled")}s.call(this,e,"/xhr_streaming",n,o)}i(XdrStreamingTransport,s);XdrStreamingTransport.enabled=function(e){if(e.cookie_needed||e.nullOrigin){return false}return o.enabled&&e.sameScheme};XdrStreamingTransport.transportName="xdr-streaming";XdrStreamingTransport.roundTrips=2;e.exports=XdrStreamingTransport},2238:(e,t,r)=>{"use strict";var i=r(6919),s=r(5378),n=r(7083),o=r(6283),a=r(5754);function XhrPollingTransport(e){if(!a.enabled&&!o.enabled){throw new Error("Transport created when disabled")}s.call(this,e,"/xhr",n,o)}i(XhrPollingTransport,s);XhrPollingTransport.enabled=function(e){if(e.nullOrigin){return false}if(a.enabled&&e.sameOrigin){return true}return o.enabled};XhrPollingTransport.transportName="xhr-polling";XhrPollingTransport.roundTrips=2;e.exports=XhrPollingTransport},8235:(e,t,r)=>{"use strict";var i=r(6919),s=r(5378),n=r(7083),o=r(6283),a=r(5754),c=r(6378);function XhrStreamingTransport(e){if(!a.enabled&&!o.enabled){throw new Error("Transport created when disabled")}s.call(this,e,"/xhr_streaming",n,o)}i(XhrStreamingTransport,s);XhrStreamingTransport.enabled=function(e){if(e.nullOrigin){return false}if(c.isOpera()){return false}return o.enabled};XhrStreamingTransport.transportName="xhr-streaming";XhrStreamingTransport.roundTrips=2;XhrStreamingTransport.needBody=!!global.document;e.exports=XhrStreamingTransport},6378:e=>{"use strict";e.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document){return true}try{return!!global.document.domain}catch(e){return false}}}},3833:(e,t,r)=>{"use strict";var i=r(6462);var s=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,n;var unrollLookup=function(e){var t;var r={};var i=[];for(t=0;t<65536;t++){i.push(String.fromCharCode(t))}e.lastIndex=0;i.join("").replace(e,(function(e){r[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4);return""}));e.lastIndex=0;return r};e.exports={quote:function(e){var t=i.stringify(e);s.lastIndex=0;if(!s.test(t)){return t}if(!n){n=unrollLookup(s)}return t.replace(s,(function(e){return n[e]}))}}},5297:(e,t,r)=>{"use strict";var i=r(9342);var s={},n=false,o=global.chrome&&global.chrome.app&&global.chrome.app.runtime;e.exports={attachEvent:function(e,t){if(typeof global.addEventListener!=="undefined"){global.addEventListener(e,t,false)}else if(global.document&&global.attachEvent){global.document.attachEvent("on"+e,t);global.attachEvent("on"+e,t)}},detachEvent:function(e,t){if(typeof global.addEventListener!=="undefined"){global.removeEventListener(e,t,false)}else if(global.document&&global.detachEvent){global.document.detachEvent("on"+e,t);global.detachEvent("on"+e,t)}},unloadAdd:function(e){if(o){return null}var t=i.string(8);s[t]=e;if(n){setTimeout(this.triggerUnloadCallbacks,0)}return t},unloadDel:function(e){if(e in s){delete s[e]}},triggerUnloadCallbacks:function(){for(var e in s){s[e]();delete s[e]}}};var unloadTriggered=function(){if(n){return}n=true;e.exports.triggerUnloadCallbacks()};if(!o){e.exports.attachEvent("unload",unloadTriggered)}},5683:(e,t,r)=>{"use strict";var i=r(5297),s=r(6462),n=r(6378);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:utils:iframe")}e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){if(!(e.exports.WPrefix in global)){global[e.exports.WPrefix]={}}},postMessage:function(t,r){if(global.parent!==global){global.parent.postMessage(s.stringify({windowId:e.exports.currentWindowId,type:t,data:r||""}),"*")}else{debug("Cannot postMessage, no parent window.",t,r)}},createIframe:function(e,t){var r=global.document.createElement("iframe");var s,n;var unattach=function(){debug("unattach");clearTimeout(s);try{r.onload=null}catch(e){}r.onerror=null};var cleanup=function(){debug("cleanup");if(r){unattach();setTimeout((function(){if(r){r.parentNode.removeChild(r)}r=null}),0);i.unloadDel(n)}};var onerror=function(e){debug("onerror",e);if(r){cleanup();t(e)}};var post=function(e,t){debug("post",e,t);setTimeout((function(){try{if(r&&r.contentWindow){r.contentWindow.postMessage(e,t)}}catch(e){}}),0)};r.src=e;r.style.display="none";r.style.position="absolute";r.onerror=function(){onerror("onerror")};r.onload=function(){debug("onload");clearTimeout(s);s=setTimeout((function(){onerror("onload timeout")}),2e3)};global.document.body.appendChild(r);s=setTimeout((function(){onerror("timeout")}),15e3);n=i.unloadAdd(cleanup);return{post:post,cleanup:cleanup,loaded:unattach}},createHtmlfile:function(t,r){var s=["Active"].concat("Object").join("X");var n=new global[s]("htmlfile");var o,a;var c;var unattach=function(){clearTimeout(o);c.onerror=null};var cleanup=function(){if(n){unattach();i.unloadDel(a);c.parentNode.removeChild(c);c=n=null;CollectGarbage()}};var onerror=function(e){debug("onerror",e);if(n){cleanup();r(e)}};var post=function(e,t){try{setTimeout((function(){if(c&&c.contentWindow){c.contentWindow.postMessage(e,t)}}),0)}catch(e){}};n.open();n.write("<html><s"+"cript>"+'document.domain="'+global.document.domain+'";'+"</s"+"cript></html>");n.close();n.parentWindow[e.exports.WPrefix]=global[e.exports.WPrefix];var u=n.createElement("div");n.body.appendChild(u);c=n.createElement("iframe");u.appendChild(c);c.src=t;c.onerror=function(){onerror("onerror")};o=setTimeout((function(){onerror("timeout")}),15e3);a=i.unloadAdd(cleanup);return{post:post,cleanup:cleanup,loaded:unattach}}};e.exports.iframeEnabled=false;if(global.document){e.exports.iframeEnabled=(typeof global.postMessage==="function"||typeof global.postMessage==="object")&&!n.isKonqueror()}},5273:e=>{"use strict";var t={};["log","debug","warn"].forEach((function(e){var r;try{r=global.console&&global.console[e]&&global.console[e].apply}catch(e){}t[e]=r?function(){return global.console[e].apply(global.console,arguments)}:e==="log"?function(){}:t.log}));e.exports=t},3662:e=>{"use strict";e.exports={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e)){return e}var t,r;for(var i=1,s=arguments.length;i<s;i++){t=arguments[i];for(r in t){if(Object.prototype.hasOwnProperty.call(t,r)){e[r]=t[r]}}}return e}}},9342:(e,t,r)=>{"use strict";var i=r(6417);var s="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){var t=s.length;var r=i.randomBytes(e);var n=[];for(var o=0;o<e;o++){n.push(s.substr(r[o]%t,1))}return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;var r=new Array(t+1).join("0");return(r+this.number(e)).slice(-t)}}},9503:(e,t,r)=>{"use strict";var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:utils:transport")}e.exports=function(e){return{filterToEnabled:function(t,r){var i={main:[],facade:[]};if(!t){t=[]}else if(typeof t==="string"){t=[t]}e.forEach((function(e){if(!e){return}if(e.transportName==="websocket"&&r.websocket===false){debug("disabled from server","websocket");return}if(t.length&&t.indexOf(e.transportName)===-1){debug("not in whitelist",e.transportName);return}if(e.enabled(r)){debug("enabled",e.transportName);i.main.push(e);if(e.facadeTransport){i.facade.push(e.facadeTransport)}}else{debug("disabled",e.transportName)}}));return i}}}},7166:(e,t,r)=>{"use strict";var i=r(2928);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=r(5343)("sockjs-client:utils:url")}e.exports={getOrigin:function(e){if(!e){return null}var t=new i(e);if(t.protocol==="file:"){return null}var r=t.port;if(!r){r=t.protocol==="https:"?"443":"80"}return t.protocol+"//"+t.hostname+":"+r},isOriginEqual:function(e,t){var r=this.getOrigin(e)===this.getOrigin(t);debug("same",e,t,r);return r},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var r=e.split("?");return r[0]+t+(r[1]?"?"+r[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},2336:e=>{e.exports="1.5.2"},2928:(e,t,r)=>{"use strict";var i=r(3118),s=r(1687),n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,a=/^[a-zA-Z]:/,c="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",u=new RegExp("^"+c+"+");function trimLeft(e){return(e?e:"").toString().replace(u,"")}var h=[["#","hash"],["?","query"],function sanitize(e,t){return isSpecial(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",undefined,1,1],[/:(\d+)$/,"port",undefined,1],[NaN,"hostname",undefined,1,1]];var l={hash:1,query:1};function lolcation(e){var t;if(typeof window!=="undefined")t=window;else if(typeof global!=="undefined")t=global;else if(typeof self!=="undefined")t=self;else t={};var r=t.location||{};e=e||r;var i={},s=typeof e,o;if("blob:"===e.protocol){i=new Url(unescape(e.pathname),{})}else if("string"===s){i=new Url(e,{});for(o in l)delete i[o]}else if("object"===s){for(o in e){if(o in l)continue;i[o]=e[o]}if(i.slashes===undefined){i.slashes=n.test(e.href)}}return i}function isSpecial(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function extractProtocol(e,t){e=trimLeft(e);t=t||{};var r=o.exec(e);var i=r[1]?r[1].toLowerCase():"";var s=!!r[2];var n=!!r[3];var a=0;var c;if(s){if(n){c=r[2]+r[3]+r[4];a=r[2].length+r[3].length}else{c=r[2]+r[4];a=r[2].length}}else{if(n){c=r[3]+r[4];a=r[3].length}else{c=r[4]}}if(i==="file:"){if(a>=2){c=c.slice(2)}}else if(isSpecial(i)){c=r[4]}else if(i){if(s){c=c.slice(2)}}else if(a>=2&&isSpecial(t.protocol)){c=r[4]}return{protocol:i,slashes:s||isSpecial(i),slashesCount:a,rest:c}}function resolve(e,t){if(e==="")return t;var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=r.length,s=r[i-1],n=false,o=0;while(i--){if(r[i]==="."){r.splice(i,1)}else if(r[i]===".."){r.splice(i,1);o++}else if(o){if(i===0)n=true;r.splice(i,1);o--}}if(n)r.unshift("");if(s==="."||s==="..")r.push("");return r.join("/")}function Url(e,t,r){e=trimLeft(e);if(!(this instanceof Url)){return new Url(e,t,r)}var n,o,c,u,l,f,p=h.slice(),d=typeof t,v=this,_=0;if("object"!==d&&"string"!==d){r=t;t=null}if(r&&"function"!==typeof r)r=s.parse;t=lolcation(t);o=extractProtocol(e||"",t);n=!o.protocol&&!o.slashes;v.slashes=o.slashes||n&&t.slashes;v.protocol=o.protocol||t.protocol||"";e=o.rest;if(o.protocol==="file:"&&(o.slashesCount!==2||a.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!isSpecial(v.protocol))){p[3]=[/(.*)/,"pathname"]}for(;_<p.length;_++){u=p[_];if(typeof u==="function"){e=u(e,v);continue}c=u[0];f=u[1];if(c!==c){v[f]=e}else if("string"===typeof c){if(~(l=e.indexOf(c))){if("number"===typeof u[2]){v[f]=e.slice(0,l);e=e.slice(l+u[2])}else{v[f]=e.slice(l);e=e.slice(0,l)}}}else if(l=c.exec(e)){v[f]=l[1];e=e.slice(0,l.index)}v[f]=v[f]||(n&&u[3]?t[f]||"":"");if(u[4])v[f]=v[f].toLowerCase()}if(r)v.query=r(v.query);if(n&&t.slashes&&v.pathname.charAt(0)!=="/"&&(v.pathname!==""||t.pathname!=="")){v.pathname=resolve(v.pathname,t.pathname)}if(v.pathname.charAt(0)!=="/"&&isSpecial(v.protocol)){v.pathname="/"+v.pathname}if(!i(v.port,v.protocol)){v.host=v.hostname;v.port=""}v.username=v.password="";if(v.auth){u=v.auth.split(":");v.username=u[0]||"";v.password=u[1]||""}v.origin=v.protocol!=="file:"&&isSpecial(v.protocol)&&v.host?v.protocol+"//"+v.host:"null";v.href=v.toString()}function set(e,t,r){var n=this;switch(e){case"query":if("string"===typeof t&&t.length){t=(r||s.parse)(t)}n[e]=t;break;case"port":n[e]=t;if(!i(t,n.protocol)){n.host=n.hostname;n[e]=""}else if(t){n.host=n.hostname+":"+t}break;case"hostname":n[e]=t;if(n.port)t+=":"+n.port;n.host=t;break;case"host":n[e]=t;if(/:\d+$/.test(t)){t=t.split(":");n.port=t.pop();n.hostname=t.join(":")}else{n.hostname=t;n.port=""}break;case"protocol":n.protocol=t.toLowerCase();n.slashes=!r;break;case"pathname":case"hash":if(t){var o=e==="pathname"?"/":"#";n[e]=t.charAt(0)!==o?o+t:t}else{n[e]=t}break;default:n[e]=t}for(var a=0;a<h.length;a++){var c=h[a];if(c[4])n[c[1]]=n[c[1]].toLowerCase()}n.origin=n.protocol!=="file:"&&isSpecial(n.protocol)&&n.host?n.protocol+"//"+n.host:"null";n.href=n.toString();return n}function toString(e){if(!e||"function"!==typeof e)e=s.stringify;var t,r=this,i=r.protocol;if(i&&i.charAt(i.length-1)!==":")i+=":";var n=i+(r.slashes||isSpecial(r.protocol)?"//":"");if(r.username){n+=r.username;if(r.password)n+=":"+r.password;n+="@"}n+=r.host+r.pathname;t="object"===typeof r.query?e(r.query):r.query;if(t)n+="?"!==t.charAt(0)?"?"+t:t;if(r.hash)n+=r.hash;return n}Url.prototype={set:set,toString:toString};Url.extractProtocol=extractProtocol;Url.location=lolcation;Url.trimLeft=trimLeft;Url.qs=s;e.exports=Url},3436:(e,t,r)=>{"use strict";var i=r(5062),s=r(4199),n=r(3985);var o={client:function(e,t){t=t||{};if(t.masking===undefined)t.masking=true;return new s(e,t)},server:function(e){e=e||{};if(e.requireMasking===undefined)e.requireMasking=true;return new n(e)},http:function(){return n.http.apply(n,arguments)},isSecureRequest:function(e){return n.isSecureRequest(e)},isWebSocket:function(e){return i.isWebSocket(e)},validateOptions:function(e,t){i.validateOptions(e,t)}};e.exports=o},5062:(e,t,r)=>{"use strict";var i=r(5088).Buffer,s=r(8080).EventEmitter,n=r(1669),o=r(7969),a=r(8642),c=r(9605);var Base=function(e,t,r){s.call(this);Base.validateOptions(r||{},["maxLength","masking","requireMasking","protocols"]);this._request=e;this._reader=new c;this._options=r||{};this._maxLength=this._options.maxLength||this.MAX_LENGTH;this._headers=new a;this.__queue=[];this.readyState=0;this.url=t;this.io=new o.IO(this);this.messages=new o.Messages(this);this._bindEventListeners()};n.inherits(Base,s);Base.isWebSocket=function(e){var t=e.headers.connection||"",r=e.headers.upgrade||"";return e.method==="GET"&&t.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&r.toLowerCase()==="websocket"};Base.validateOptions=function(e,t){for(var r in e){if(t.indexOf(r)<0)throw new Error("Unrecognized option: "+r)}};var u={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var e=this;this.messages.on("error",(function(){}));this.on("message",(function(t){var r=e.messages;if(r.readable)r.emit("data",t.data)}));this.on("error",(function(t){var r=e.messages;if(r.readable)r.emit("error",t)}));this.on("close",(function(){var t=e.messages;if(!t.readable)return;t.readable=t.writable=false;t.emit("end")}))},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(e){return false},setHeader:function(e,t){if(this.readyState>0)return false;this._headers.set(e,t);return true},start:function(){if(this.readyState!==0)return false;if(!Base.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var e;try{e=this._handshakeResponse()}catch(e){return this._failHandshake(e)}this._write(e);if(this._stage!==-1)this._open();return true},_failHandshake:function(e){var t=new a;t.set("Content-Type","text/plain");t.set("Content-Length",i.byteLength(e.message,"utf8"));t=["HTTP/1.1 400 Bad Request",t.toString(),e.message];this._write(i.from(t.join("\r\n"),"utf8"));this._fail("protocol_error",e.message);return false},text:function(e){return this.frame(e)},binary:function(e){return false},ping:function(){return false},pong:function(){return false},close:function(e,t){if(this.readyState!==1)return false;this.readyState=3;this.emit("close",new Base.CloseEvent(null,null));return true},_open:function(){this.readyState=1;this.__queue.forEach((function(e){this.frame.apply(this,e)}),this);this.__queue=[];this.emit("open",new Base.OpenEvent)},_queue:function(e){this.__queue.push(e);return true},_write:function(e){var t=this.io;if(t.readable)t.emit("data",e)},_fail:function(e,t){this.readyState=2;this.emit("error",new Error(t));this.close()}};for(var h in u)Base.prototype[h]=u[h];Base.ConnectEvent=function(){};Base.OpenEvent=function(){};Base.CloseEvent=function(e,t){this.code=e;this.reason=t};Base.MessageEvent=function(e){this.data=e};Base.PingEvent=function(e){this.data=e};Base.PongEvent=function(e){this.data=e};e.exports=Base},4199:(e,t,r)=>{"use strict";var i=r(5088).Buffer,s=r(6417),n=r(8835),o=r(1669),a=r(8710),c=r(5062),u=r(9722),h=r(4255);var Client=function(e,t){this.version="hybi-"+u.VERSION;u.call(this,null,e,t);this.readyState=-1;this._key=Client.generateKey();this._accept=u.generateAccept(this._key);this._http=new a("response");var r=n.parse(this.url),s=r.auth&&i.from(r.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(r.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(r.pathname||"/")+(r.search||"");this._headers.set("Host",r.host);this._headers.set("Upgrade","websocket");this._headers.set("Connection","Upgrade");this._headers.set("Sec-WebSocket-Key",this._key);this._headers.set("Sec-WebSocket-Version",u.VERSION);if(this._protocols.length>0)this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", "));if(s)this._headers.set("Authorization","Basic "+s)};o.inherits(Client,u);Client.generateKey=function(){return s.randomBytes(16).toString("base64")};var l={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(e,t){return new h(this,e,t)},start:function(){if(this.readyState!==-1)return false;this._write(this._handshakeRequest());this.readyState=0;return true},parse:function(e){if(this.readyState===3)return;if(this.readyState>0)return u.prototype.parse.call(this,e);this._http.parse(e);if(!this._http.isComplete())return;this._validateHandshake();if(this.readyState===3)return;this._open();this.parse(this._http.body)},_handshakeRequest:function(){var e=this._extensions.generateOffer();if(e)this._headers.set("Sec-WebSocket-Extensions",e);var t="GET "+this._pathname+" HTTP/1.1",r=[t,this._headers.toString(),""];return i.from(r.join("\r\n"),"utf8")},_failHandshake:function(e){e="Error during WebSocket handshake: "+e;this.readyState=3;this.emit("error",new Error(e));this.emit("close",new c.CloseEvent(this.ERRORS.protocol_error,e))},_validateHandshake:function(){this.statusCode=this._http.statusCode;this.headers=this._http.headers;if(this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var e=this._http.headers,t=e["upgrade"]||"",r=e["connection"]||"",i=e["sec-websocket-accept"]||"",s=e["sec-websocket-protocol"]||"";if(t==="")return this._failHandshake("'Upgrade' header is missing");if(t.toLowerCase()!=="websocket")return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(r==="")return this._failHandshake("'Connection' header is missing");if(r.toLowerCase()!=="upgrade")return this._failHandshake("'Connection' header value is not 'Upgrade'");if(i!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");this.protocol=null;if(s!==""){if(this._protocols.indexOf(s)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");else this.protocol=s}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(e){return this._failHandshake(e.message)}}};for(var f in l)Client.prototype[f]=l[f];e.exports=Client},8914:(e,t,r)=>{"use strict";var i=r(5088).Buffer,s=r(5062),n=r(1669);var Draft75=function(e,t,r){s.apply(this,arguments);this._stage=0;this.version="hixie-75";this._headers.set("Upgrade","WebSocket");this._headers.set("Connection","Upgrade");this._headers.set("WebSocket-Origin",this._request.headers.origin);this._headers.set("WebSocket-Location",this.url)};n.inherits(Draft75,s);var o={close:function(){if(this.readyState===3)return false;this.readyState=3;this.emit("close",new s.CloseEvent(null,null));return true},parse:function(e){if(this.readyState>1)return;this._reader.put(e);this._reader.eachByte((function(e){var t;switch(this._stage){case-1:this._body.push(e);this._sendHandshakeBody();break;case 0:this._parseLeadingByte(e);break;case 1:this._length=(e&127)+128*this._length;if(this._closing&&this._length===0){return this.close()}else if((e&128)!==128){if(this._length===0){this._stage=0}else{this._skipped=0;this._stage=2}}break;case 2:if(e===255){this._stage=0;t=i.from(this._buffer).toString("utf8",0,this._buffer.length);this.emit("message",new s.MessageEvent(t))}else{if(this._length){this._skipped+=1;if(this._skipped===this._length)this._stage=0}else{this._buffer.push(e);if(this._buffer.length>this._maxLength)return this.close()}}break}}),this)},frame:function(e){if(this.readyState===0)return this._queue([e]);if(this.readyState>1)return false;if(typeof e!=="string")e=e.toString();var t=i.byteLength(e),r=i.allocUnsafe(t+2);r[0]=0;r.write(e,1);r[r.length-1]=255;this._write(r);return true},_handshakeResponse:function(){var e="HTTP/1.1 101 Web Socket Protocol Handshake",t=[e,this._headers.toString(),""];return i.from(t.join("\r\n"),"utf8")},_parseLeadingByte:function(e){if((e&128)===128){this._length=0;this._stage=1}else{delete this._length;delete this._skipped;this._buffer=[];this._stage=2}}};for(var a in o)Draft75.prototype[a]=o[a];e.exports=Draft75},2631:(e,t,r)=>{"use strict";var i=r(5088).Buffer,s=r(5062),n=r(8914),o=r(6417),a=r(1669);var numberFromKey=function(e){return parseInt((e.match(/[0-9]/g)||[]).join(""),10)};var spacesInKey=function(e){return(e.match(/ /g)||[]).length};var Draft76=function(e,t,r){n.apply(this,arguments);this._stage=-1;this._body=[];this.version="hixie-76";this._headers.clear();this._headers.set("Upgrade","WebSocket");this._headers.set("Connection","Upgrade");this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin);this._headers.set("Sec-WebSocket-Location",this.url)};a.inherits(Draft76,n);var c={BODY_SIZE:8,start:function(){if(!n.prototype.start.call(this))return false;this._started=true;this._sendHandshakeBody();return true},close:function(){if(this.readyState===3)return false;if(this.readyState===1)this._write(i.from([255,0]));this.readyState=3;this.emit("close",new s.CloseEvent(null,null));return true},_handshakeResponse:function(){var e=this._request.headers,t=e["sec-websocket-key1"],r=e["sec-websocket-key2"];if(!t)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!r)throw new Error("Missing required header: Sec-WebSocket-Key2");var s=numberFromKey(t),n=spacesInKey(t),o=numberFromKey(r),a=spacesInKey(r);if(s%n!==0||o%a!==0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[s/n,o/a];var c="HTTP/1.1 101 WebSocket Protocol Handshake",e=[c,this._headers.toString(),""];return i.from(e.join("\r\n"),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var e=o.createHash("md5"),t=i.allocUnsafe(8+this.BODY_SIZE);t.writeUInt32BE(this._keyValues[0],0);t.writeUInt32BE(this._keyValues[1],4);i.from(this._body).copy(t,8,0,this.BODY_SIZE);e.update(t);return i.from(e.digest("binary"),"binary")},_sendHandshakeBody:function(){if(!this._started)return;var e=this._handshakeSignature();if(!e)return;this._write(e);this._stage=0;this._open();if(this._body.length>this.BODY_SIZE)this.parse(this._body.slice(this.BODY_SIZE))},_parseLeadingByte:function(e){if(e!==255)return n.prototype._parseLeadingByte.call(this,e);this._closing=true;this._length=0;this._stage=1}};for(var u in c)Draft76.prototype[u]=c[u];e.exports=Draft76},8642:e=>{"use strict";var Headers=function(){this.clear()};Headers.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"];Headers.prototype.clear=function(){this._sent={};this._lines=[]};Headers.prototype.set=function(e,t){if(t===undefined)return;e=this._strip(e);t=this._strip(t);var r=e.toLowerCase();if(!this._sent.hasOwnProperty(r)||this.ALLOWED_DUPLICATES.indexOf(r)>=0){this._sent[r]=true;this._lines.push(e+": "+t+"\r\n")}};Headers.prototype.toString=function(){return this._lines.join("")};Headers.prototype._strip=function(e){return e.toString().replace(/^ */,"").replace(/ *$/,"")};e.exports=Headers},9722:(e,t,r)=>{"use strict";var i=r(5088).Buffer,s=r(6417),n=r(1669),o=r(6651),a=r(5062),c=r(7101),u=r(3628);var Hybi=function(e,t,r){a.apply(this,arguments);this._extensions=new o;this._stage=0;this._masking=this._options.masking;this._protocols=this._options.protocols||[];this._requireMasking=this._options.requireMasking;this._pingCallbacks={};if(typeof this._protocols==="string")this._protocols=this._protocols.split(/ *, */);if(!this._request)return;var i=this._request.headers["sec-websocket-protocol"],s=this._protocols;if(i!==undefined){if(typeof i==="string")i=i.split(/ *, */);this.protocol=i.filter((function(e){return s.indexOf(e)>=0}))[0]}this.version="hybi-"+Hybi.VERSION};n.inherits(Hybi,a);Hybi.VERSION="13";Hybi.mask=function(e,t,r){if(!t||t.length===0)return e;r=r||0;for(var i=0,s=e.length-r;i<s;i++){e[r+i]=e[r+i]^t[i%4]}return e};Hybi.generateAccept=function(e){var t=s.createHash("sha1");t.update(e+Hybi.GUID);return t.digest("base64")};Hybi.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var h={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(e){this._extensions.add(e);return true},parse:function(e){this._reader.put(e);var t=true;while(t){switch(this._stage){case 0:t=this._reader.read(1);if(t)this._parseOpcode(t[0]);break;case 1:t=this._reader.read(1);if(t)this._parseLength(t[0]);break;case 2:t=this._reader.read(this._frame.lengthBytes);if(t)this._parseExtendedLength(t);break;case 3:t=this._reader.read(4);if(t){this._stage=4;this._frame.maskingKey=t}break;case 4:t=this._reader.read(this._frame.length);if(t){this._stage=0;this._emitFrame(t)}break;default:t=null}}},text:function(e){if(this.readyState>1)return false;return this.frame(e,"text")},binary:function(e){if(this.readyState>1)return false;return this.frame(e,"binary")},ping:function(e,t){if(this.readyState>1)return false;e=e||"";if(t)this._pingCallbacks[e]=t;return this.frame(e,"ping")},pong:function(e){if(this.readyState>1)return false;e=e||"";return this.frame(e,"pong")},close:function(e,t){e=e||"";t=t||this.ERRORS.normal_closure;if(this.readyState<=0){this.readyState=3;this.emit("close",new a.CloseEvent(t,e));return true}else if(this.readyState===1){this.readyState=2;this._extensions.close((function(){this.frame(e,"close",t)}),this);return true}else{return false}},frame:function(e,t,r){if(this.readyState<=0)return this._queue([e,t,r]);if(this.readyState>2)return false;if(e instanceof Array)e=i.from(e);if(typeof e==="number")e=e.toString();var n=new u,o=typeof e==="string",a,h;n.rsv1=n.rsv2=n.rsv3=false;n.opcode=this.OPCODES[t||(o?"text":"binary")];a=o?i.from(e,"utf8"):e;if(r){h=a;a=i.allocUnsafe(2+h.length);a.writeUInt16BE(r,0);h.copy(a,2)}n.data=a;var onMessageReady=function(e){var t=new c;t.final=true;t.rsv1=e.rsv1;t.rsv2=e.rsv2;t.rsv3=e.rsv3;t.opcode=e.opcode;t.masked=!!this._masking;t.length=e.data.length;t.payload=e.data;if(t.masked)t.maskingKey=s.randomBytes(4);this._sendFrame(t)};if(this.MESSAGE_OPCODES.indexOf(n.opcode)>=0)this._extensions.processOutgoingMessage(n,(function(e,t){if(e)return this._fail("extension_error",e.message);onMessageReady.call(this,t)}),this);else onMessageReady.call(this,n);return true},_sendFrame:function(e){var t=e.length,r=t<=125?2:t<=65535?4:10,s=r+(e.masked?4:0),n=i.allocUnsafe(s+t),o=e.masked?this.MASK:0;n[0]=(e.final?this.FIN:0)|(e.rsv1?this.RSV1:0)|(e.rsv2?this.RSV2:0)|(e.rsv3?this.RSV3:0)|e.opcode;if(t<=125){n[1]=o|t}else if(t<=65535){n[1]=o|126;n.writeUInt16BE(t,2)}else{n[1]=o|127;n.writeUInt32BE(Math.floor(t/4294967296),2);n.writeUInt32BE(t%4294967296,6)}e.payload.copy(n,s);if(e.masked){e.maskingKey.copy(n,r);Hybi.mask(n,e.maskingKey,s)}this._write(n)},_handshakeResponse:function(){var e=this._request.headers["sec-websocket-key"],t=this._request.headers["sec-websocket-version"];if(t!==Hybi.VERSION)throw new Error("Unsupported WebSocket version: "+t);if(typeof e!=="string")throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket");this._headers.set("Connection","Upgrade");this._headers.set("Sec-WebSocket-Accept",Hybi.generateAccept(e));if(this.protocol)this._headers.set("Sec-WebSocket-Protocol",this.protocol);var r=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);if(r)this._headers.set("Sec-WebSocket-Extensions",r);var s="HTTP/1.1 101 Switching Protocols",n=[s,this._headers.toString(),""];return i.from(n.join("\r\n"),"utf8")},_shutdown:function(e,t,r){delete this._frame;delete this._message;this._stage=5;var i=this.readyState===1;this.readyState=2;this._extensions.close((function(){if(i)this.frame(t,"close",e);this.readyState=3;if(r)this.emit("error",new Error(t));this.emit("close",new a.CloseEvent(e,t))}),this)},_fail:function(e,t){if(this.readyState>1)return;this._shutdown(this.ERRORS[e],t,true)},_parseOpcode:function(e){var t=[this.RSV1,this.RSV2,this.RSV3].map((function(t){return(e&t)===t}));var r=this._frame=new c;r.final=(e&this.FIN)===this.FIN;r.rsv1=t[0];r.rsv2=t[1];r.rsv3=t[2];r.opcode=e&this.OPCODE;this._stage=1;if(!this._extensions.validFrameRsv(r))return this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(r.rsv1?1:0)+", reserved2 = "+(r.rsv2?1:0)+", reserved3 = "+(r.rsv3?1:0));if(this.OPCODE_CODES.indexOf(r.opcode)<0)return this._fail("protocol_error","Unrecognized frame opcode: "+r.opcode);if(this.MESSAGE_OPCODES.indexOf(r.opcode)<0&&!r.final)return this._fail("protocol_error","Received fragmented control frame: opcode = "+r.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(r.opcode)>=0)return this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished")},_parseLength:function(e){var t=this._frame;t.masked=(e&this.MASK)===this.MASK;t.length=e&this.LENGTH;if(t.length>=0&&t.length<=125){this._stage=t.masked?3:4;if(!this._checkFrameLength())return}else{this._stage=2;t.lengthBytes=t.length===126?2:8}if(this._requireMasking&&!t.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(e){var t=this._frame;t.length=this._readUInt(e);this._stage=t.masked?3:4;if(this.MESSAGE_OPCODES.indexOf(t.opcode)<0&&t.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+t.length);if(!this._checkFrameLength())return},_checkFrameLength:function(){var e=this._message?this._message.length:0;if(e+this._frame.length>this._maxLength){this._fail("too_large","WebSocket frame length too large");return false}else{return true}},_emitFrame:function(e){var t=this._frame,r=t.payload=Hybi.mask(e,t.maskingKey),i=t.opcode,s,n,o,c,h;delete this._frame;if(i===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(t)}if(i===this.OPCODES.text||i===this.OPCODES.binary){this._message=new u;this._message.pushFrame(t)}if(t.final&&this.MESSAGE_OPCODES.indexOf(i)>=0)return this._emitMessage(this._message);if(i===this.OPCODES.close){n=r.length>=2?r.readUInt16BE(0):null;o=r.length>2?this._encode(r.slice(2)):null;if(!(r.length===0)&&!(n!==null&&n>=this.MIN_RESERVED_ERROR&&n<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(n)<0)n=this.ERRORS.protocol_error;if(r.length>125||r.length>2&&!o)n=this.ERRORS.protocol_error;this._shutdown(n||this.DEFAULT_ERROR_CODE,o||"")}if(i===this.OPCODES.ping){this.frame(r,"pong");this.emit("ping",new a.PingEvent(r.toString()))}if(i===this.OPCODES.pong){c=this._pingCallbacks;s=this._encode(r);h=c[s];delete c[s];if(h)h();this.emit("pong",new a.PongEvent(r.toString()))}},_emitMessage:function(e){var e=this._message;e.read();delete this._message;this._extensions.processIncomingMessage(e,(function(e,t){if(e)return this._fail("extension_error",e.message);var r=t.data;if(t.opcode===this.OPCODES.text)r=this._encode(r);if(r===null)return this._fail("encoding_error","Could not decode a text frame as UTF-8");else this.emit("message",new a.MessageEvent(r))}),this)},_encode:function(e){try{var t=e.toString("binary",0,e.length);if(!this.UTF8_MATCH.test(t))return null}catch(e){}return e.toString("utf8",0,e.length)},_readUInt:function(e){if(e.length===2)return e.readUInt16BE(0);return e.readUInt32BE(0)*4294967296+e.readUInt32BE(4)}};for(var l in h)Hybi.prototype[l]=h[l];e.exports=Hybi},7101:e=>{"use strict";var Frame=function(){};var t={final:false,rsv1:false,rsv2:false,rsv3:false,opcode:null,masked:false,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var r in t)Frame.prototype[r]=t[r];e.exports=Frame},3628:(e,t,r)=>{"use strict";var i=r(5088).Buffer;var Message=function(){this.rsv1=false;this.rsv2=false;this.rsv3=false;this.opcode=null;this.length=0;this._chunks=[]};var s={read:function(){return this.data=this.data||i.concat(this._chunks,this.length)},pushFrame:function(e){this.rsv1=this.rsv1||e.rsv1;this.rsv2=this.rsv2||e.rsv2;this.rsv3=this.rsv3||e.rsv3;if(this.opcode===null)this.opcode=e.opcode;this._chunks.push(e.payload);this.length+=e.length}};for(var n in s)Message.prototype[n]=s[n];e.exports=Message},4255:(e,t,r)=>{"use strict";var i=r(5088).Buffer,s=r(2413).Stream,n=r(8835),o=r(1669),a=r(5062),c=r(8642),u=r(8710);var h={"ws:":80,"wss:":443};var Proxy=function(e,t,r){this._client=e;this._http=new u("response");this._origin=typeof e.url==="object"?e.url:n.parse(e.url);this._url=typeof t==="object"?t:n.parse(t);this._options=r||{};this._state=0;this.readable=this.writable=true;this._paused=false;this._headers=new c;this._headers.set("Host",this._origin.host);this._headers.set("Connection","keep-alive");this._headers.set("Proxy-Connection","keep-alive");var s=this._url.auth&&i.from(this._url.auth,"utf8").toString("base64");if(s)this._headers.set("Proxy-Authorization","Basic "+s)};o.inherits(Proxy,s);var l={setHeader:function(e,t){if(this._state!==0)return false;this._headers.set(e,t);return true},start:function(){if(this._state!==0)return false;this._state=1;var e=this._origin,t=e.port||h[e.protocol],r="CONNECT "+e.hostname+":"+t+" HTTP/1.1";var s=[r,this._headers.toString(),""];this.emit("data",i.from(s.join("\r\n"),"utf8"));return true},pause:function(){this._paused=true},resume:function(){this._paused=false;this.emit("drain")},write:function(e){if(!this.writable)return false;this._http.parse(e);if(!this._http.isComplete())return!this._paused;this.statusCode=this._http.statusCode;this.headers=this._http.headers;if(this.statusCode===200){this.emit("connect",new a.ConnectEvent)}else{var t="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(t))}this.end();return!this._paused},end:function(e){if(!this.writable)return;if(e!==undefined)this.write(e);this.readable=this.writable=false;this.emit("close");this.emit("end")},destroy:function(){this.end()}};for(var f in l)Proxy.prototype[f]=l[f];e.exports=Proxy},3985:(e,t,r)=>{"use strict";var i=r(1669),s=r(8710),n=r(5062),o=r(8914),a=r(2631),c=r(9722);var Server=function(e){n.call(this,null,null,e);this._http=new s("request")};i.inherits(Server,n);var u={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",(function(){}));this.on("error",(function(){}))},parse:function(e){if(this._delegate)return this._delegate.parse(e);this._http.parse(e);if(!this._http.isComplete())return;this.method=this._http.method;this.url=this._http.url;this.headers=this._http.headers;this.body=this._http.body;var t=this;this._delegate=Server.http(this,this._options);this._delegate.messages=this.messages;this._delegate.io=this.io;this._open();this.EVENTS.forEach((function(e){this._delegate.on(e,(function(r){t.emit(e,r)}))}),this);this.protocol=this._delegate.protocol;this.version=this._delegate.version;this.parse(this._http.body);this.emit("connect",new n.ConnectEvent)},_open:function(){this.__queue.forEach((function(e){this._delegate[e[0]].apply(this._delegate,e[1])}),this);this.__queue=[]}};["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach((function(e){u[e]=function(){if(this._delegate){return this._delegate[e].apply(this._delegate,arguments)}else{this.__queue.push([e,arguments]);return true}}}));for(var h in u)Server.prototype[h]=u[h];Server.isSecureRequest=function(e){if(e.connection&&e.connection.authorized!==undefined)return true;if(e.socket&&e.socket.secure)return true;var t=e.headers;if(!t)return false;if(t["https"]==="on")return true;if(t["x-forwarded-ssl"]==="on")return true;if(t["x-forwarded-scheme"]==="https")return true;if(t["x-forwarded-proto"]==="https")return true;return false};Server.determineUrl=function(e){var t=this.isSecureRequest(e)?"wss:":"ws:";return t+"//"+e.headers.host+e.url};Server.http=function(e,t){t=t||{};if(t.requireMasking===undefined)t.requireMasking=true;var r=e.headers,i=r["sec-websocket-version"],s=r["sec-websocket-key"],n=r["sec-websocket-key1"],u=r["sec-websocket-key2"],h=this.determineUrl(e);if(i||s)return new c(e,h,t);else if(n||u)return new a(e,h,t);else return new o(e,h,t)};e.exports=Server},9605:(e,t,r)=>{"use strict";var i=r(5088).Buffer;var StreamReader=function(){this._queue=[];this._queueSize=0;this._offset=0};StreamReader.prototype.put=function(e){if(!e||e.length===0)return;if(!i.isBuffer(e))e=i.from(e);this._queue.push(e);this._queueSize+=e.length};StreamReader.prototype.read=function(e){if(e>this._queueSize)return null;if(e===0)return i.alloc(0);this._queueSize-=e;var t=this._queue,r=e,s=t[0],n,o;if(s.length>=e){if(s.length===e){return t.shift()}else{o=s.slice(0,e);t[0]=s.slice(e);return o}}for(var a=0,c=t.length;a<c;a++){if(r<t[a].length)break;r-=t[a].length}n=t.splice(0,a);if(r>0&&t.length>0){n.push(t[0].slice(0,r));t[0]=t[0].slice(r)}return i.concat(n,e)};StreamReader.prototype.eachByte=function(e,t){var r,i,s;while(this._queue.length>0){r=this._queue[0];i=r.length;while(this._offset<i){s=this._offset;this._offset+=1;e.call(t,r[s])}this._offset=0;this._queue.shift()}};e.exports=StreamReader},8710:(e,t,r)=>{"use strict";var i=r(508).m,s=r(5088).Buffer;var n={request:i.REQUEST||"request",response:i.RESPONSE||"response"};var HttpParser=function(e){this._type=e;this._parser=new i(n[e]);this._complete=false;this.headers={};var t=null,r=this;this._parser.onHeaderField=function(e,r,i){t=e.toString("utf8",r,r+i).toLowerCase()};this._parser.onHeaderValue=function(e,i,s){var n=e.toString("utf8",i,i+s);if(r.headers.hasOwnProperty(t))r.headers[t]+=", "+n;else r.headers[t]=n};this._parser.onHeadersComplete=this._parser[i.kOnHeadersComplete]=function(e,t,i,s,n,o){var a=arguments[0];if(typeof a==="object"){s=a.method;n=a.url;o=a.statusCode;i=a.headers}r.method=typeof s==="number"?HttpParser.METHODS[s]:s;r.statusCode=o;r.url=n;if(!i)return;for(var c=0,u=i.length,h,l;c<u;c+=2){h=i[c].toLowerCase();l=i[c+1];if(r.headers.hasOwnProperty(h))r.headers[h]+=", "+l;else r.headers[h]=l}r._complete=true}};HttpParser.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var o=process.version?process.version.match(/[0-9]+/g).map((function(e){return parseInt(e,10)})):[];if(o[0]===0&&o[1]===12){HttpParser.METHODS[16]="REPORT";HttpParser.METHODS[17]="MKACTIVITY";HttpParser.METHODS[18]="CHECKOUT";HttpParser.METHODS[19]="MERGE";HttpParser.METHODS[20]="M-SEARCH";HttpParser.METHODS[21]="NOTIFY";HttpParser.METHODS[22]="SUBSCRIBE";HttpParser.METHODS[23]="UNSUBSCRIBE";HttpParser.METHODS[24]="PATCH";HttpParser.METHODS[25]="PURGE"}HttpParser.prototype.isComplete=function(){return this._complete};HttpParser.prototype.parse=function(e){var t=this._parser.execute(e,0,e.length);if(typeof t!=="number"){this.error=t;this._complete=true;return}if(this._complete)this.body=t<e.length?e.slice(t):s.alloc(0)};e.exports=HttpParser},7969:(e,t,r)=>{"use strict";var i=r(2413).Stream,s=r(1669);var IO=function(e){this.readable=this.writable=true;this._paused=false;this._driver=e};s.inherits(IO,i);IO.prototype.pause=function(){this._paused=true;this._driver.messages._paused=true};IO.prototype.resume=function(){this._paused=false;this.emit("drain");var e=this._driver.messages;e._paused=false;e.emit("drain")};IO.prototype.write=function(e){if(!this.writable)return false;this._driver.parse(e);return!this._paused};IO.prototype.end=function(e){if(!this.writable)return;if(e!==undefined)this.write(e);this.writable=false;var t=this._driver.messages;if(t.readable){t.readable=t.writable=false;t.emit("end")}};IO.prototype.destroy=function(){this.end()};var Messages=function(e){this.readable=this.writable=true;this._paused=false;this._driver=e};s.inherits(Messages,i);Messages.prototype.pause=function(){this._driver.io._paused=true};Messages.prototype.resume=function(){this._driver.io._paused=false;this._driver.io.emit("drain")};Messages.prototype.write=function(e){if(!this.writable)return false;if(typeof e==="string")this._driver.text(e);else this._driver.binary(e);return!this._paused};Messages.prototype.end=function(e){if(e!==undefined)this.write(e)};Messages.prototype.destroy=function(){};t.IO=IO;t.Messages=Messages},348:e=>{"use strict";var t=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,r=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,i=/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/,s=new RegExp(t.source+"(?:=(?:"+t.source+"|"+i.source+"))?"),n=new RegExp(t.source+"(?: *; *"+s.source+")*","g"),o=new RegExp("^"+n.source+"(?: *, *"+n.source+")*$"),a=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/;var c=Object.prototype.hasOwnProperty;var u={parseHeader:function(e){var t=new Offers;if(e===""||e===undefined)return t;if(!o.test(e))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+e);var r=e.match(n);r.forEach((function(e){var r=e.match(new RegExp(s.source,"g")),i=r.shift(),n={};r.forEach((function(e){var t=e.match(s),r=t[1],i;if(t[2]!==undefined){i=t[2]}else if(t[3]!==undefined){i=t[3].replace(/\\/g,"")}else{i=true}if(a.test(i))i=parseFloat(i);if(c.call(n,r)){n[r]=[].concat(n[r]);n[r].push(i)}else{n[r]=i}}),this);t.push(i,n)}),this);return t},serializeParams:function(e,t){var i=[];var print=function(e,t){if(t instanceof Array){t.forEach((function(t){print(e,t)}))}else if(t===true){i.push(e)}else if(typeof t==="number"){i.push(e+"="+t)}else if(r.test(t)){i.push(e+'="'+t.replace(/"/g,'\\"')+'"')}else{i.push(e+"="+t)}};for(var s in t)print(s,t[s]);return[e].concat(i).join("; ")}};var Offers=function(){this._byName={};this._inOrder=[]};Offers.prototype.push=function(e,t){if(!c.call(this._byName,e))this._byName[e]=[];this._byName[e].push(t);this._inOrder.push({name:e,params:t})};Offers.prototype.eachOffer=function(e,t){var r=this._inOrder;for(var i=0,s=r.length;i<s;i++)e.call(t,r[i].name,r[i].params)};Offers.prototype.byName=function(e){return this._byName[e]||[]};Offers.prototype.toArray=function(){return this._inOrder.slice()};e.exports=u},4062:(e,t,r)=>{"use strict";var i=r(8127),s=r(4102);var Cell=function(e){this._ext=e[0];this._session=e[1];this._functors={incoming:new i(this._session,"processIncomingMessage"),outgoing:new i(this._session,"processOutgoingMessage")}};Cell.prototype.pending=function(e){var t=this._functors[e];if(!t._stopped)t.pending+=1};Cell.prototype.incoming=function(e,t,r,i){this._exec("incoming",e,t,r,i)};Cell.prototype.outgoing=function(e,t,r,i){this._exec("outgoing",e,t,r,i)};Cell.prototype.close=function(){this._closed=this._closed||new s;this._doClose();return this._closed};Cell.prototype._exec=function(e,t,r,i,s){this._functors[e].call(t,r,(function(e,t){if(e)e.message=this._ext.name+": "+e.message;i.call(s,e,t);this._doClose()}),this)};Cell.prototype._doClose=function(){var e=this._functors.incoming,t=this._functors.outgoing;if(!this._closed||e.pending+t.pending!==0)return;if(this._session)this._session.close();this._session=null;this._closed.done()};e.exports=Cell},8127:(e,t,r)=>{"use strict";var i=r(9987);var Functor=function(e,t){this._session=e;this._method=t;this._queue=new i(Functor.QUEUE_SIZE);this._stopped=false;this.pending=0};Functor.QUEUE_SIZE=8;Functor.prototype.call=function(e,t,r,i){if(this._stopped)return;var s={error:e,message:t,callback:r,context:i,done:false},n=false,o=this;this._queue.push(s);if(s.error){s.done=true;this._stop();return this._flushQueue()}var handler=function(e,t){if(!(n^(n=true)))return;if(e){o._stop();s.error=e;s.message=null}else{s.message=t}s.done=true;o._flushQueue()};try{this._session[this._method](t,handler)}catch(e){handler(e)}};Functor.prototype._stop=function(){this.pending=this._queue.length;this._stopped=true};Functor.prototype._flushQueue=function(){var e=this._queue,t;while(e.length>0&&e.peek().done){t=e.shift();if(t.error){this.pending=0;e.clear()}else{this.pending-=1}t.callback.call(t.context,t.error,t.message)}};e.exports=Functor},6541:(e,t,r)=>{"use strict";var i=r(4062),s=r(4102);var Pipeline=function(e){this._cells=e.map((function(e){return new i(e)}));this._stopped={incoming:false,outgoing:false}};Pipeline.prototype.processIncomingMessage=function(e,t,r){if(this._stopped.incoming)return;this._loop("incoming",this._cells.length-1,-1,-1,e,t,r)};Pipeline.prototype.processOutgoingMessage=function(e,t,r){if(this._stopped.outgoing)return;this._loop("outgoing",0,this._cells.length,1,e,t,r)};Pipeline.prototype.close=function(e,t){this._stopped={incoming:true,outgoing:true};var r=this._cells.map((function(e){return e.close()}));if(e)s.all(r).then((function(){e.call(t)}))};Pipeline.prototype._loop=function(e,t,r,i,s,n,o){var a=this._cells,c=a.length,u=this;while(c--)a[c].pending(e);var pipe=function(t,s,c){if(t===r)return n.call(o,s,c);a[t][e](s,c,(function(r,s){if(r)u._stopped[e]=true;pipe(t+i,r,s)}))};pipe(t,null,s)};e.exports=Pipeline},4102:(e,t,r)=>{"use strict";var i=r(9987);var Pledge=function(){this._complete=false;this._callbacks=new i(Pledge.QUEUE_SIZE)};Pledge.QUEUE_SIZE=4;Pledge.all=function(e){var t=new Pledge,r=e.length,i=r;if(r===0)t.done();while(i--)e[i].then((function(){r-=1;if(r===0)t.done()}));return t};Pledge.prototype.then=function(e){if(this._complete)e();else this._callbacks.push(e)};Pledge.prototype.done=function(){this._complete=true;var e=this._callbacks,t;while(t=e.shift())t()};e.exports=Pledge},9987:e=>{"use strict";var RingBuffer=function(e){this._bufferSize=e;this.clear()};RingBuffer.prototype.clear=function(){this._buffer=new Array(this._bufferSize);this._ringOffset=0;this._ringSize=this._bufferSize;this._head=0;this._tail=0;this.length=0};RingBuffer.prototype.push=function(e){var t=false,r=false;if(this._ringSize<this._bufferSize){t=this._tail===0}else if(this._ringOffset===this._ringSize){t=true;r=this._tail===0}if(t){this._tail=this._bufferSize;this._buffer=this._buffer.concat(new Array(this._bufferSize));this._bufferSize=this._buffer.length;if(r)this._ringSize=this._bufferSize}this._buffer[this._tail]=e;this.length+=1;if(this._tail<this._ringSize)this._ringOffset+=1;this._tail=(this._tail+1)%this._bufferSize};RingBuffer.prototype.peek=function(){if(this.length===0)return void 0;return this._buffer[this._head]};RingBuffer.prototype.shift=function(){if(this.length===0)return void 0;var e=this._buffer[this._head];this._buffer[this._head]=void 0;this.length-=1;this._ringOffset-=1;if(this._ringOffset===0&&this.length>0){this._head=this._ringSize;this._ringOffset=this.length;this._ringSize=this._bufferSize}else{this._head=(this._head+1)%this._ringSize}return e};e.exports=RingBuffer},6651:(e,t,r)=>{"use strict";var i=r(348),s=r(6541);var Extensions=function(){this._rsv1=this._rsv2=this._rsv3=null;this._byName={};this._inOrder=[];this._sessions=[];this._index={}};Extensions.MESSAGE_OPCODES=[1,2];var n={add:function(e){if(typeof e.name!=="string")throw new TypeError("extension.name must be a string");if(e.type!=="permessage")throw new TypeError('extension.type must be "permessage"');if(typeof e.rsv1!=="boolean")throw new TypeError("extension.rsv1 must be true or false");if(typeof e.rsv2!=="boolean")throw new TypeError("extension.rsv2 must be true or false");if(typeof e.rsv3!=="boolean")throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(e.name))throw new TypeError('An extension with name "'+e.name+'" is already registered');this._byName[e.name]=e;this._inOrder.push(e)},generateOffer:function(){var e=[],t=[],r={};this._inOrder.forEach((function(s){var n=s.createClientSession();if(!n)return;var o=[s,n];e.push(o);r[s.name]=o;var a=n.generateOffer();a=a?[].concat(a):[];a.forEach((function(e){t.push(i.serializeParams(s.name,e))}),this)}),this);this._sessions=e;this._index=r;return t.length>0?t.join(", "):null},activate:function(e){var t=i.parseHeader(e),r=[];t.eachOffer((function(e,t){var s=this._index[e];if(!s)throw new Error('Server sent an extension response for unknown extension "'+e+'"');var n=s[0],o=s[1],a=this._reserved(n);if(a)throw new Error("Server sent two extension responses that use the RSV"+a[0]+' bit: "'+a[1]+'" and "'+n.name+'"');if(o.activate(t)!==true)throw new Error("Server sent unacceptable extension parameters: "+i.serializeParams(e,t));this._reserve(n);r.push(s)}),this);this._sessions=r;this._pipeline=new s(r)},generateResponse:function(e){var t=[],r=[],n=i.parseHeader(e);this._inOrder.forEach((function(e){var s=n.byName(e.name);if(s.length===0||this._reserved(e))return;var o=e.createServerSession(s);if(!o)return;this._reserve(e);t.push([e,o]);r.push(i.serializeParams(e.name,o.generateResponse()))}),this);this._sessions=t;this._pipeline=new s(t);return r.length>0?r.join(", "):null},validFrameRsv:function(e){var t={rsv1:false,rsv2:false,rsv3:false},r;if(Extensions.MESSAGE_OPCODES.indexOf(e.opcode)>=0){for(var i=0,s=this._sessions.length;i<s;i++){r=this._sessions[i][0];t.rsv1=t.rsv1||r.rsv1;t.rsv2=t.rsv2||r.rsv2;t.rsv3=t.rsv3||r.rsv3}}return(t.rsv1||!e.rsv1)&&(t.rsv2||!e.rsv2)&&(t.rsv3||!e.rsv3)},processIncomingMessage:function(e,t,r){this._pipeline.processIncomingMessage(e,t,r)},processOutgoingMessage:function(e,t,r){this._pipeline.processOutgoingMessage(e,t,r)},close:function(e,t){if(!this._pipeline)return e.call(t);this._pipeline.close(e,t)},_reserve:function(e){this._rsv1=this._rsv1||e.rsv1&&e.name;this._rsv2=this._rsv2||e.rsv2&&e.name;this._rsv3=this._rsv3||e.rsv3&&e.name},_reserved:function(e){if(this._rsv1&&e.rsv1)return[1,this._rsv1];if(this._rsv2&&e.rsv2)return[2,this._rsv2];if(this._rsv3&&e.rsv3)return[3,this._rsv3];return false}};for(var o in n)Extensions.prototype[o]=n[o];e.exports=Extensions},5343:e=>{"use strict";e.exports=require("@effect-x/deps/compiled/debug")},8080:e=>{"use strict";e.exports=require("@effect-x/deps/compiled/events")},2357:e=>{"use strict";e.exports=require("assert")},4293:e=>{"use strict";e.exports=require("buffer")},6417:e=>{"use strict";e.exports=require("crypto")},8605:e=>{"use strict";e.exports=require("http")},7211:e=>{"use strict";e.exports=require("https")},1631:e=>{"use strict";e.exports=require("net")},2413:e=>{"use strict";e.exports=require("stream")},4016:e=>{"use strict";e.exports=require("tls")},8835:e=>{"use strict";e.exports=require("url")},1669:e=>{"use strict";e.exports=require("util")}};var t={};function __nccwpck_require__(r){var i=t[r];if(i!==undefined){return i.exports}var s=t[r]={id:r,loaded:false,exports:{}};var n=true;try{e[r].call(s.exports,s,s.exports,__nccwpck_require__);n=false}finally{if(n)delete t[r]}s.loaded=true;return s.exports}(()=>{__nccwpck_require__.nmd=e=>{e.paths=[];if(!e.children)e.children=[];return e}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r=__nccwpck_require__(1114);module.exports=r})();