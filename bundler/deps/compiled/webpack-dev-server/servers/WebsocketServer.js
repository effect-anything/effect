(()=>{var e={734:e=>{"use strict";e.exports=class BaseServer{constructor(e){this.server=e;this.clients=[]}}},121:(e,t,r)=>{"use strict";const s=r(927);const i=r(734);e.exports=class WebsocketServer extends i{static heartbeatInterval=1e3;constructor(e){super(e);const t={...this.server.options.webSocketServer.options,clientTracking:false};const r=typeof t.port==="undefined"&&typeof t.server==="undefined";if(r){t.noServer=true}this.implementation=new s.Server(t);this.server.server.on("upgrade",((e,t,r)=>{if(!this.implementation.shouldHandle(e)){return}this.implementation.handleUpgrade(e,t,r,(t=>{this.implementation.emit("connection",t,e)}))}));this.implementation.on("error",(e=>{this.server.logger.error(e.message)}));const i=setInterval((()=>{this.clients.forEach((e=>{if(e.isAlive===false){e.terminate();return}e.isAlive=false;e.ping((()=>{}))}))}),WebsocketServer.heartbeatInterval);this.implementation.on("connection",(e=>{this.clients.push(e);e.isAlive=true;e.on("pong",(()=>{e.isAlive=true}));e.on("close",(()=>{this.clients.splice(this.clients.indexOf(e),1)}))}));this.implementation.on("close",(()=>{clearInterval(i)}))}}},275:(e,t,r)=>{e.exports=r(121)},927:e=>{"use strict";e.exports=require("@effect-x/deps/compiled/ws")}};var t={};function __nccwpck_require__(r){var s=t[r];if(s!==undefined){return s.exports}var i=t[r]={exports:{}};var n=true;try{e[r](i,i.exports,__nccwpck_require__);n=false}finally{if(n)delete t[r]}return i.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r=__nccwpck_require__(275);module.exports=r})();